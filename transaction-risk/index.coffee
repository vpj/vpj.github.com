Weya = require './weya'

TRANSACTION =
 po: '1000013747'
 line: '2'
 material: '2nd Unit of Samsung Tab 4'
 company: 'Ceylon Cold Stores Ltd'
 vendor: 'John Keells Office Automation'
 date: '7/17/2015'
 value: '27,441.00'

FIELDS =
 po: 'PO No'
 line: 'Line Item'
 material: 'Material Desc'
 company: 'Company'
 vendor: 'Vendor'
 date: 'Date'
 value: 'Value'

template = ->
 @html ->
  @head ->
   @meta charset: "utf-8"
   @title "Forestpin - JKH Transaction Risk Report"
   @meta name: "viewport", content: "width=device-width, initial-scale=1.0"
   @meta name: "apple-mobile-web-app-capable", content:"yes"

   @link href: "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css", rel: "stylesheet"
   @link href: "style.css?", rel: "stylesheet"

  @body ->
   @div ".container", ->
    @h3 "Purchase Order Risk Report"

    @div ".row.transaction-risk", ->
     @div ".col-md-3.col-sm-4.col-xs-6", ->
      @div ".value-label", "Forestpin Risk"
      @div ".value.red", "9.9"
      @div ".comment",  "0 - Low Risk, 10 - High Risk"
     @div ".col-md-3.col-sm-4.col-xs-12", ->
      @svg ".bullet", width: "300px", height: "85px", ->
       @g transform: "translate(20, 30)", ->
        @rect ".green", height: "15", width: "120"
        @rect ".orange", x: "120", height: "15", width:"60"
        @rect ".red", x:"180", y: "0", height: "15", width: "20"
        @text ".axis-label", x: "0", y: "-10", "0"
        @text ".axis-label", x: "120", y: "-10", "6"
        @text ".axis-label", x: "180", y: "-10", "9"
        @text ".axis-label", x: "200", y: "-10", "10"

        @line ".value", x1: "190", x2: "190", y1: "-7", y2: "22"
        @text ".value-label", x: "190", y: "39", "9.5"

    @div ".row.risk-description", ->
     @div ".col-md-6.col-sm-8", ->
      @p ->
       @span "The transaction "
       @span ".field", "value"
       @span ".value", "Rs.27,441.00"
       @span " has repeated "
       @span ".value", "2"
       @span " times,"
       @span " across"
       @span ".value", "1"
       @span " "
       @span ".field", "Vendor"
       @span "("
       @span ".value", "John Keells Office Automation"
       @span ")"
       @span "."
       @span " 68% of these transactions were processed within "
       @span ".value", "0 days"
       @span "."

      @p ".explanation", ->
       @span "Possible risks could be:"
       @ul ".explanation", ->
        @li "mistakenly processing the same transaction repeatedly"
        @li "deliberately splitting the transaction, to circumvent controls"

    @div ".row.transaction-details", ->
     @div ".col-md-6.col-sm-8", ->
      @h4 "Transaction Details"
      @div ".row", ->
       for k, v of TRANSACTION
        @div ".col-xs-6", ->
         @div ".value-label", FIELDS[k]
         @div ".value", v

    @div ".row.risk-details", ->
     @div ".col-md-12", ->
      @h4 "Risk Details"
      @div ".row", ->
       @div ".col-md-3.col-sm-4.col-xs-6", ->
        @div ".value-label", "Number of repetitions"
        @div ".value", "2"
       @div ".col-md-3.col-sm-4.col-xs-12", ->
        @svg ".bullet", width: "300px", height: "85px", ->
         @g transform: "translate(10,0)", ->
          @path ".sparkline-fill", d: "M5,30L5,30L6.259231905465288,30L22.22304283604136,30L23.48227474150665,29.983994878361074L24.70088626292467,28.223431498079385L25.960118168389958,27.03104993597951L27.17872968980798,28.44750320102433L28.437961595273265,27.127080665813057L29.697193500738553,27.8393085787452L30.915805022156572,26.342829705505764L32.17503692762186,26.606914212548013L33.39364844903989,27.559218950064018L34.652880354505164,27.8393085787452L35.912112259970456,27.255121638924454L37.049483013293944,27.62323943661972L38.30871491875923,27.85531370038412L39.527326440177255,27.76728553137004L40.78655834564254,26.638924455825865L42.00516986706056,27.487195902688864L43.26440177252585,27.159090909090907L44.523633677991135,27.45518565941101L45.742245199409155,26.822983354673497L47.001477104874446,27.175096030729836L48.220088626292466,26.887003841229195L49.47932053175776,26.238796414852754L50.73855243722304,25.374519846350832L51.9165435745938,24.398207426376437L53.17577548005908,25.494558258642765L54.39438700147711,25.486555697823302L55.65361890694239,25.238476312419973L56.87223042836041,24.102112676056336L58.1314623338257,25.966709346991035L59.39069423929099,24.374199743918055L60.60930576070901,24.5342509603073L61.86853766617429,24.8303457106274L63.08714918759231,13.906850192061462L64.34638109305762,21.07714468629962L65.6056129985229,17.52400768245839L66.74298375184637,17.556017925736235L68.00221565731167,20.829065300896286L69.22082717872969,19.68469910371319L70.48005908419498,16.3556338028169L71.69867060561299,13.578745198463508L72.95790251107829,13.530729833546737L74.21713441654359,16.667733674775928L75.4357459379616,17.29193341869398L76.69497784342688,18.556338028169012L77.91358936484491,15.363316261203583L79.1728212703102,20.893085787451984L80.43205317577547,16.17157490396927L81.56942392909897,17.323943661971832L82.82865583456424,5L84.04726735598227,18.5803457106274L85.30649926144757,19.44462227912932L86.52511078286558,16.339628681177977L87.78434268833087,15.859475032010245L89.04357459379617,14.098911651728553L90.26218611521418,13.458706786171573L91.52141802067946,15.107234314980792L92.74002954209749,11.602112676056338L93.99926144756279,14.835147247119078L95.25849335302806,18.42829705505762L96.39586410635157,17.33194622279129L97.65509601181684,17.548015364916772L98.87370753323486,18.284250960307297L100.13293943870015,14.258962868117798L101.35155096011816,15.155249679897569L102.61078286558345,15.211267605633804L103.87001477104874,11.25L105.08862629246677,12.79449423815621L106.34785819793206,16.01952624839949L107.56646971935008,18.420294494238156L108.82570162481537,16.49167733674776L110.08493353028065,18.01216389244558L111.2629246676514,17.46798975672215L112.5221565731167,19.324583866837386L113.74076809453472,16.955825864276566L115,23.89404609475032L115,30"
          @path ".sparkline-line", d: "M5,30L6.259231905465288,30L22.22304283604136,30L23.48227474150665,29.983994878361074L24.70088626292467,28.223431498079385L25.960118168389958,27.03104993597951L27.17872968980798,28.44750320102433L28.437961595273265,27.127080665813057L29.697193500738553,27.8393085787452L30.915805022156572,26.342829705505764L32.17503692762186,26.606914212548013L33.39364844903989,27.559218950064018L34.652880354505164,27.8393085787452L35.912112259970456,27.255121638924454L37.049483013293944,27.62323943661972L38.30871491875923,27.85531370038412L39.527326440177255,27.76728553137004L40.78655834564254,26.638924455825865L42.00516986706056,27.487195902688864L43.26440177252585,27.159090909090907L44.523633677991135,27.45518565941101L45.742245199409155,26.822983354673497L47.001477104874446,27.175096030729836L48.220088626292466,26.887003841229195L49.47932053175776,26.238796414852754L50.73855243722304,25.374519846350832L51.9165435745938,24.398207426376437L53.17577548005908,25.494558258642765L54.39438700147711,25.486555697823302L55.65361890694239,25.238476312419973L56.87223042836041,24.102112676056336L58.1314623338257,25.966709346991035L59.39069423929099,24.374199743918055L60.60930576070901,24.5342509603073L61.86853766617429,24.8303457106274L63.08714918759231,13.906850192061462L64.34638109305762,21.07714468629962L65.6056129985229,17.52400768245839L66.74298375184637,17.556017925736235L68.00221565731167,20.829065300896286L69.22082717872969,19.68469910371319L70.48005908419498,16.3556338028169L71.69867060561299,13.578745198463508L72.95790251107829,13.530729833546737L74.21713441654359,16.667733674775928L75.4357459379616,17.29193341869398L76.69497784342688,18.556338028169012L77.91358936484491,15.363316261203583L79.1728212703102,20.893085787451984L80.43205317577547,16.17157490396927L81.56942392909897,17.323943661971832L82.82865583456424,5L84.04726735598227,18.5803457106274L85.30649926144757,19.44462227912932L86.52511078286558,16.339628681177977L87.78434268833087,15.859475032010245L89.04357459379617,14.098911651728553L90.26218611521418,13.458706786171573L91.52141802067946,15.107234314980792L92.74002954209749,11.602112676056338L93.99926144756279,14.835147247119078L95.25849335302806,18.42829705505762L96.39586410635157,17.33194622279129L97.65509601181684,17.548015364916772L98.87370753323486,18.284250960307297L100.13293943870015,14.258962868117798L101.35155096011816,15.155249679897569L102.61078286558345,15.211267605633804L103.87001477104874,11.25L105.08862629246677,12.79449423815621L106.34785819793206,16.01952624839949L107.56646971935008,18.420294494238156L108.82570162481537,16.49167733674776L110.08493353028065,18.01216389244558L111.2629246676514,17.46798975672215L112.5221565731167,19.324583866837386L113.74076809453472,16.955825864276566L115,23.89404609475032"


      @div ".row", ->
       @div ".col-md-3.col-sm-4.col-xs-6", ->
        @div ".value-label", "Standard deviation of date"
        @div ".value", "0"
       @div ".col-md-3.col-sm-4.col-xs-12", ->
        @svg ".bullet", width: "300px", height: "85px", ->
         @g transform: "translate(20, 30)", ->
          @rect ".green", height: "15", width: "120"
          @rect ".orange", x: "120", height: "15", width:"60"
          @rect ".red", x:"180", y: "0", height: "15", width: "20"
          @text ".axis-label", x: "0", y: "-10", "0"
          @text ".axis-label", x: "120", y: "-10", "6"
          @text ".axis-label", x: "180", y: "-10", "9"
          @text ".axis-label", x: "200", y: "-10", "10"

          @line ".value", x1: "190", x2: "190", y1: "-7", y2: "22"
          @text ".value-label", x: "190", y: "39", "9.5"
      @div ".row", ->
       @div ".col-md-3.col-sm-4.col-xs-6", ->
        @div ".value-label", "Vendor #"
        @div ".value", "1"
       @div ".col-md-3.col-sm-4.col-xs-12", ->
        @svg ".bullet", width: "300px", height: "85px", ->
         @g transform: "translate(20, 30)", ->
          @rect ".green", height: "15", width: "120"
          @rect ".orange", x: "120", height: "15", width:"60"
          @rect ".red", x:"180", y: "0", height: "15", width: "20"
          @text ".axis-label", x: "0", y: "-10", "0"
          @text ".axis-label", x: "120", y: "-10", "6"
          @text ".axis-label", x: "180", y: "-10", "9"
          @text ".axis-label", x: "200", y: "-10", "10"

          @line ".value", x1: "190", x2: "190", y1: "-7", y2: "22"
          @text ".value-label", x: "190", y: "39", "9.5"





   @script src:"weya.js"
   @script src:"base.js"

html = Weya.markup {}, template
html = "<!DOCTYPE html>#{html}"

console.log html


