<!DOCTYPE html><html>
 <head>
  <meta charset="utf-8">
  </meta>
  <title>
   2 to 10 times faster HTML animations
  </title>
  <meta name="viewport" content="width=550, initial-scale=1.0">
  </meta>
  <meta name="apple-mobile-web-app-capable" content="yes">
  </meta>
  <link href="http://fonts.googleapis.com/css?family=Raleway:400,100,200,300,500,600,700,800,900" rel="stylesheet" type="text/css">
  </link>
  <link href="lib/skeleton/css/skeleton.css" rel="stylesheet">
  </link>
  <link href="lib/highlightjs/styles/default.css" rel="stylesheet">
  </link>
  <link href="css/style.css" rel="stylesheet">
  </link>
  <link href="blog.css" rel="stylesheet">
  </link>
  <script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-44255805-1', 'auto');
ga('send', 'pageview');
  </script>
 </head>
 <body>
  <div class="container wallapatta-container ">
   <div class="header ">
    <h1>
     <a href="index.html">
      VARUNA JAYASIRI
     </a>
    </h1>
    <a class="button " href="https://www.twitter.com/vpj">
     @vpj
    </a>
   </div>
   <div class="wallapatta ">
    <h1 class="title ">
     2 to 10 times faster HTML animations
    </h1>
    <h3 class="date ">
     May 10, 2014
    </h3>
    <div style="margin-bottom:30px;">
     <a class="twitter-share-button " href="https://twitter.com/share" data-via="vpj" data-size="large">
      Tweet
     </a>
     <script>
      !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
     </script>
    </div>
    <div class="row ">
     <div class="wallapatta-main nine columns ">
      <div id="wallapatta_0" class="article"><div id="wallapatta_1" class="section"><div class="content"><p id="wallapatta_2" class="paragraph"><span id="wallapatta_34" class="text">When animating/moving HTML elements, setting their position with </span><code id="wallapatta_35" class="code"><span id="wallapatta_36" class="text">-webkit-transform: matrix3d()</span></code><span id="wallapatta_37" class="text"> gives two to ten times faster frame rates compared to </span><code id="wallapatta_38" class="code"><span id="wallapatta_39" class="text">top</span></code><span id="wallapatta_40" class="text">/</span><code id="wallapatta_41" class="code"><span id="wallapatta_42" class="text">left</span></code><span id="wallapatta_43" class="text"> or </span><code id="wallapatta_44" class="code"><span id="wallapatta_45" class="text">-webkit-transform: matrix()</span></code><span id="wallapatta_46" class="text">. On mobile devices you can observe native app like performance with </span><code id="wallapatta_47" class="code"><span id="wallapatta_48" class="text">transform: matrix3d</span></code><span id="wallapatta_49" class="text">.</span></p></div></div><div id="wallapatta_3" class="section"><h2 class="heading"><span id="wallapatta_4" class="block"><span id="wallapatta_50" class="text">Demo</span></span></h2><div class="content"></div></div><div id="wallapatta_10" class="section"><div class="content"><p id="wallapatta_11" class="paragraph"><span id="wallapatta_53" class="text">It moves a panel that contains 10,000 </span><code id="wallapatta_54" class="code"><span id="wallapatta_55" class="text">div</span></code><span id="wallapatta_56" class="text"> elements. On my macbook air running chrome, </span><code id="wallapatta_57" class="code"><span id="wallapatta_58" class="text">transform:matrix3d</span></code><span id="wallapatta_59" class="text"> gives 30 - 40 fps while </span><code id="wallapatta_60" class="code"><span id="wallapatta_61" class="text">position:top/left</span></code><span id="wallapatta_62" class="text"> and </span><code id="wallapatta_63" class="code"><span id="wallapatta_64" class="text">transform:matrix</span></code><span id="wallapatta_65" class="text"> gives 10-15 fps. You can check the frame rate by selecting </span><strong id="wallapatta_66" class="bold"><span id="wallapatta_67" class="text">Show FPS meter</span></strong><span id="wallapatta_68" class="text"> on </span><strong id="wallapatta_69" class="bold"><span id="wallapatta_70" class="text">Rendering</span></strong><span id="wallapatta_71" class="text"> tab of chrome developer tools.</span></p></div></div><div id="wallapatta_12" class="section"><div class="content"><p id="wallapatta_13" class="paragraph"><span id="wallapatta_72" class="text">The following image shows snapshot of frames timeline with </span><code id="wallapatta_73" class="code"><span id="wallapatta_74" class="text">top</span></code><span id="wallapatta_75" class="text">/</span><code id="wallapatta_76" class="code"><span id="wallapatta_77" class="text">left</span></code><span id="wallapatta_78" class="text">.</span></p></div></div><div id="wallapatta_14" class="image-container"><img class="image" src="img/transform/topleft.png" alt="Timeline for top/left"></div><div id="wallapatta_15" class="section"><div class="content"><p id="wallapatta_16" class="paragraph"><span id="wallapatta_79" class="text">This is the snapshot of frames timeline with </span><code id="wallapatta_80" class="code"><span id="wallapatta_81" class="text">transform:matrix3d</span></code><span id="wallapatta_82" class="text">.</span></p></div></div><div id="wallapatta_17" class="image-container"><img class="image" src="img/transform/matrix3d.png" alt="Timeline for transform:matrix3d"></div><div id="wallapatta_18" class="section"><div class="content"><p id="wallapatta_19" class="paragraph"><code id="wallapatta_83" class="code"><span id="wallapatta_84" class="text">transform: matrix3d</span></code><span id="wallapatta_85" class="text"> takes out the paint operation which gives increased frame.</span></p></div></div><div id="wallapatta_20" class="special"><div id="wallapatta_21" class="section"><div class="content"><p id="wallapatta_22" class="paragraph"><span id="wallapatta_86" class="text">The 3d translation layers offer a way of pre-blitting all the stuff inside the DOM element into a layer, which is therefore available for direct blitting operations inside the render tree. Well, at least that's the conceptual idea behind.</span></p></div></div><div id="wallapatta_23" class="section"><div class="content"><p id="wallapatta_24" class="paragraph"><strong id="wallapatta_87" class="bold"><span id="wallapatta_88" class="text">martensms</span></strong><span id="wallapatta_89" class="text"> on </span><a id="wallapatta_90" class="link" href="http://www.html5gamedevs.com/topic/171-myth-busting-the-html5-performance-of-transformtranslate-vs-topleft/">html5gamedevs.com</a></p></div></div></div><div id="wallapatta_25" class="section"><div class="content"><p id="wallapatta_26" class="paragraph"><span id="wallapatta_91" class="text">The frame rates with </span><code id="wallapatta_92" class="code"><span id="wallapatta_93" class="text">transform:matrix3d</span></code><span id="wallapatta_94" class="text"> becomes about </span><em id="wallapatta_95" class="italics"><span id="wallapatta_96" class="text">10 times</span></em><span id="wallapatta_97" class="text"> higher than other methods as the content of the panel which moves gets heavier. I tried with about a 1,000 small SVG graphs with 1,000 data points.</span></p></div></div><div id="wallapatta_27" class="section"><div class="content"><p id="wallapatta_28" class="paragraph"><span id="wallapatta_98" class="text">Most of the discussions I found on the internet were comparing </span><code id="wallapatta_99" class="code"><span id="wallapatta_100" class="text">top</span></code><span id="wallapatta_101" class="text">/</span><code id="wallapatta_102" class="code"><span id="wallapatta_103" class="text">left</span></code><span id="wallapatta_104" class="text"> to </span><code id="wallapatta_105" class="code"><span id="wallapatta_106" class="text">transform: matrix</span></code><span id="wallapatta_107" class="text"> or </span><code id="wallapatta_108" class="code"><span id="wallapatta_109" class="text">transform: translate</span></code><span id="wallapatta_110" class="text"> </span><sup id="wallapatta_111" class="superScript"><span id="wallapatta_112" class="text">1, 2</span></sup><span id="wallapatta_113" class="text">, but not so much information about using </span><code id="wallapatta_114" class="code"><span id="wallapatta_115" class="text">transform: matrix3d</span></code><span id="wallapatta_116" class="text">.</span></p></div></div></div>
     </div>
     <div class="wallapatta-sidebar three columns ">
      <div id="wallapatta_5" class="sidenote"><div id="wallapatta_6" class="section"><div class="content"><p id="wallapatta_7" class="paragraph"><a id="wallapatta_51" class="link" href="http://bl.ocks.org/vpj/c5468e4593319009320e">Demo 1</a></p></div></div><div id="wallapatta_8" class="section"><div class="content"><p id="wallapatta_9" class="paragraph"><a id="wallapatta_52" class="link" href="http://bl.ocks.org/vpj/c5468e4593319009320e">Demo 2</a></p></div></div></div><div id="wallapatta_29" class="sidenote"><div id="wallapatta_30" class="section"><div class="content"><p id="wallapatta_31" class="paragraph"><sup id="wallapatta_117" class="superScript"><span id="wallapatta_118" class="text">1</span></sup><span id="wallapatta_119" class="text"> An old discussion on Hacker News about </span><code id="wallapatta_120" class="code"><span id="wallapatta_121" class="text">transform: translate</span></code><span id="wallapatta_122" class="text"> and </span><code id="wallapatta_123" class="code"><span id="wallapatta_124" class="text">top</span></code><span id="wallapatta_125" class="text">/</span><code id="wallapatta_126" class="code"><span id="wallapatta_127" class="text">left</span></code><span id="wallapatta_128" class="text"> (3d transformations are not considered) </span><a id="wallapatta_129" class="link" href="https://news.ycombinator.com/item?id=5301731">Myth busting the HTML5 performance of transform:translate vs. top/left</a></p></div></div><div id="wallapatta_32" class="section"><div class="content"><p id="wallapatta_33" class="paragraph"><sup id="wallapatta_130" class="superScript"><span id="wallapatta_131" class="text">2</span></sup><span id="wallapatta_132" class="text"> Some other advantages of using </span><code id="wallapatta_133" class="code"><span id="wallapatta_134" class="text">transform</span></code><span id="wallapatta_135" class="text"> </span><a id="wallapatta_136" class="link" href="http://www.paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/">Why Moving Elements With Translate</a></p></div></div></div>
     </div>
     <div style="display:none;">
      <div class='wallapatta-code'>When animating/moving HTML elements, setting their position with ``-webkit-transform: matrix3d()`` gives two to ten times faster frame rates compared to ``top``/``left`` or ``-webkit-transform: matrix()``. On mobile devices you can observe native app like performance with ``transform: matrix3d``.

##Demo

 &gt;&gt;&gt;
  &lt;&lt;http://bl.ocks.org/vpj/c5468e4593319009320e(Demo 1)&gt;&gt;

  &lt;&lt;http://bl.ocks.org/vpj/c5468e4593319009320e(Demo 2)&gt;&gt;

It moves a panel that contains 10,000 ``div`` elements. On my macbook air running chrome, ``transform:matrix3d`` gives 30 - 40 fps while ``position:top/left`` and ``transform:matrix`` gives 10-15 fps. You can check the frame rate by selecting **Show FPS meter** on **Rendering** tab of chrome developer tools.

The following image shows snapshot of frames timeline with ``top``/``left``.

!img/transform/topleft.png(Timeline for top/left)

This is the snapshot of frames timeline with ``transform:matrix3d``.

!img/transform/matrix3d.png(Timeline for transform:matrix3d)

``transform: matrix3d`` takes out the paint operation which gives increased frame.

+++
 The 3d translation layers offer a way of pre-blitting all the stuff inside the DOM element into a layer, which is therefore available for direct blitting operations inside the render tree. Well, at least that's the conceptual idea behind.

 **martensms** on &lt;&lt;http://www.html5gamedevs.com/topic/171-myth-busting-the-html5-performance-of-transformtranslate-vs-topleft/(html5gamedevs.com)&gt;&gt;

The frame rates with ``transform:matrix3d`` becomes about --10 times-- higher than other methods as the content of the panel which moves gets heavier. I tried with about a 1,000 small SVG graphs with 1,000 data points.

Most of the discussions I found on the internet were comparing ``top``/``left`` to ``transform: matrix`` or ``transform: translate`` ^^1, 2^^, but not so much information about using ``transform: matrix3d``.

&gt;&gt;&gt;
 ^^1^^ An old discussion on Hacker News about ``transform: translate`` and ``top``/``left`` (3d transformations are not considered) &lt;&lt;https://news.ycombinator.com/item?id=5301731(Myth busting the HTML5 performance of transform:translate vs. top/left)&gt;&gt;

 ^^2^^ Some other advantages of using ``transform`` &lt;&lt;http://www.paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/(Why Moving Elements With Translate() Is Better Than Pos:abs Top/left)&gt;&gt;
</div>
     </div>
    </div>
   </div>
  </div>
  <script src="lib/highlightjs/highlight.pack.js">
  </script>
  <script src="lib/weya/weya.js">
  </script>
  <script src="lib/weya/base.js">
  </script>
  <script src="lib/mod/mod.js">
  </script>
  <script src="js/static.js?v=9">
  </script>
  <script src="js/parser.js?v=9">
  </script>
  <script src="js/reader.js?v=9">
  </script>
  <script src="js/nodes.js?v=9">
  </script>
  <script src="js/render.js?v=9">
  </script>
 </body>
</html>
