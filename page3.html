<!DOCTYPE html><html>
 <head>
  <meta charset="utf-8">
  </meta>
  <title>
   Varuna Jayasiri
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </meta>
  <meta name="apple-mobile-web-app-capable" content="yes">
  </meta>
  <link href="http://fonts.googleapis.com/css?family=Raleway:400,100,200,300,500,600,700,800,900" rel="stylesheet" type="text/css">
  </link>
  <link href="lib/skeleton/css/skeleton.css" rel="stylesheet">
  </link>
  <link href="lib/highlightjs/styles/default.css" rel="stylesheet">
  </link>
  <link href="css/style.css" rel="stylesheet">
  </link>
  <link href="css/paginate.css" rel="stylesheet">
  </link>
  <link href="blog.css" rel="stylesheet">
  </link>
  <script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-44255805-1', 'auto');
ga('send', 'pageview');
  </script>
 </head>
 <body>
  <div class="container wallapatta-container ">
   <div class="header ">
    <h1>
     <a href="index.html">
      VARUNA JAYASIRI
     </a>
    </h1>
    <a class="button " href="https://www.twitter.com/vpj">
     @vpj
    </a>
   </div>
   <div class="wallapatta ">
    <h1 class="title ">
     <a href="weya.html">
      Weya.coffee
     </a>
    </h1>
    <h3 class="date ">
     March 19, 2014
    </h3>
    <div class="row ">
     <div class="wallapatta-main nine columns ">
      <div id="wallapatta_0" class="article"><div id="wallapatta_1" class="section"><div class="content"><p id="wallapatta_2" class="paragraph"><span id="wallapatta_38" class="text">Weya.coffee is a lightweight library with no dependencies to generate DOM elements. We developed it to replace </span><a id="wallapatta_39" class="link" href="https://github.com/gradus/coffeecup">Coffeecup</a><span id="wallapatta_40" class="text"> as a client side template engine. Because of its simplicity and performance, we are also using Weya to replace DOM manipulation of </span><a id="wallapatta_41" class="link" href="http://d3js.org/">d3.js</a><span id="wallapatta_42" class="text"> in data visualizations.</span></p></div></div><div id="wallapatta_9" class="section"><div class="content"><p id="wallapatta_10" class="paragraph"><span id="wallapatta_45" class="text">Here's a small example to show the usage.</span></p></div></div><pre id="wallapatta_11" class="codeBlock"><code class="coffee">userElems = []
Weya container, <span class="hljs-function">-&gt;</span>
 @div <span class="hljs-string">".users"</span>, <span class="hljs-function">-&gt;</span>
  <span class="hljs-keyword">for</span> user, i <span class="hljs-keyword">in</span> users
   userDiv = @div <span class="hljs-string">'.user'</span>, on: {click: editUser}, <span class="hljs-function">-&gt;</span>
    name = @span <span class="hljs-string">".name"</span>, user.name
    @span <span class="hljs-string">".phone"</span>, user.phone
    <span class="hljs-keyword">if</span> v.image?
     @img src: user.image

   userDiv.userId = i
   userElems.push user: user, name: name</code></pre><div id="wallapatta_12" class="section"><div class="content"><p id="wallapatta_13" class="paragraph"><span id="wallapatta_46" class="text">The above code creates a list of users. It binds the data to the dom element </span><code id="wallapatta_47" class="code"><span id="wallapatta_48" class="text">userDiv.userId = i</span></code><span id="wallapatta_49" class="text"> and also keeps track of all the DOM elements in </span><code id="wallapatta_50" class="code"><span id="wallapatta_51" class="text">userElems</span></code><span id="wallapatta_52" class="text">. This is important if you want to manipulate the DOM without reloading the entire user list, for example if a name of a user changes you could change it with </span><code id="wallapatta_53" class="code"><span id="wallapatta_54" class="text">userElems[changedUserId].name.textContent = changedUserName</span></code><span id="wallapatta_55" class="text">.</span></p></div></div><div id="wallapatta_14" class="section"><h1 class="heading"><span id="wallapatta_15" class="block"><span id="wallapatta_56" class="text">Is it a template engine?</span></span></h1><div class="content"><div id="wallapatta_16" class="section"><div class="content"><p id="wallapatta_17" class="paragraph"><span id="wallapatta_57" class="text">Weya is quite similar to Coffeecup in terms of the syntax. But it's much faster, so it won't fail if you have lots of elements.</span></p></div></div><div id="wallapatta_21" class="section"><div class="content"><p id="wallapatta_22" class="paragraph"><span id="wallapatta_59" class="text">Also, Weya lets you register event handlers. I feel this is much cleaner than registering events later with CSS selectors, and it's easier to maintain the code since events are register within the DOM creation code.</span></p></div></div></div></div><div id="wallapatta_23" class="section"><h1 class="heading"><span id="wallapatta_24" class="block"><span id="wallapatta_60" class="text">Can it replace d3.js?</span></span></h1><div class="content"><div id="wallapatta_25" class="section"><div class="content"><p id="wallapatta_26" class="paragraph"><span id="wallapatta_61" class="text">We use weya to replace most all the d3.js DOM manipulation.</span></p></div></div><div id="wallapatta_27" class="section"><div class="content"><p id="wallapatta_28" class="paragraph"><span id="wallapatta_62" class="text">Code with Weya is simpler, shorter and nicely intended. Here's the code that draws bar chart in	</span><a id="wallapatta_63" class="link" href="http://bl.ocks.org/vpj/9636655">this example</a><span id="wallapatta_64" class="text">.</span></p></div></div><pre id="wallapatta_29" class="codeBlock"><code class="coffee">Weya svg, <span class="hljs-function">-&gt;</span>
 <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> data
  @g <span class="hljs-string">".g"</span>, transform: <span class="hljs-string">"translate(<span class="hljs-subst">#{x0 d.State}</span>,0)"</span>, <span class="hljs-function">-&gt;</span>
   <span class="hljs-keyword">for</span> age <span class="hljs-keyword">in</span> d.ages
    @rect
     width: x1.rangeBand()
     x: x1 age.name
     y: y age.value
     height: height - y age.value
     fill: color age.name

 <span class="hljs-keyword">for</span> d, i <span class="hljs-keyword">in</span> ageNames.slice().reverse()
  @g <span class="hljs-string">".legend"</span>, transform: <span class="hljs-string">"translate(0,<span class="hljs-subst">#{i * <span class="hljs-number">20</span>}</span>)"</span>, <span class="hljs-function">-&gt;</span>
   @rect x: width - <span class="hljs-number">18</span>, width: <span class="hljs-number">18</span>, height: <span class="hljs-number">18</span>, fill: color d
   @text
    x: width - <span class="hljs-number">24</span>, y: <span class="hljs-number">9</span>, dy: <span class="hljs-string">".35em"</span>
    style: {<span class="hljs-string">'text-anchor'</span>: <span class="hljs-string">"end"</span>}, text: d</code></pre><div id="wallapatta_30" class="section"><div class="content"><p id="wallapatta_31" class="paragraph"><span id="wallapatta_65" class="text">Here's the code that does the </span><a id="wallapatta_66" class="link" href="http://bl.ocks.org/mbostock/388705">same with d3.js</a><span id="wallapatta_67" class="text">.</span></p></div></div><pre id="wallapatta_32" class="codeBlock"><code class="javascript"><span class="hljs-keyword">var</span> state = svg.selectAll(<span class="hljs-string">".state"</span>)
    .data(data)
  .enter().append(<span class="hljs-string">"g"</span>)
    .attr(<span class="hljs-string">"class"</span>, <span class="hljs-string">"g"</span>)
    .attr(<span class="hljs-string">"transform"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"translate("</span> + x0(d.State) + <span class="hljs-string">",0)"</span>; });

state.selectAll(<span class="hljs-string">"rect"</span>)
    .data(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d.ages; })
  .enter().append(<span class="hljs-string">"rect"</span>)
    .attr(<span class="hljs-string">"width"</span>, x1.rangeBand())
    .attr(<span class="hljs-string">"x"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> x1(d.name); })
    .attr(<span class="hljs-string">"y"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> y(d.value); })
    .attr(<span class="hljs-string">"height"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> height - y(d.value); })
    .style(<span class="hljs-string">"fill"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> color(d.name); });

<span class="hljs-keyword">var</span> legend = svg.selectAll(<span class="hljs-string">".legend"</span>)
    .data(ageNames.slice().reverse())
  .enter().append(<span class="hljs-string">"g"</span>)
    .attr(<span class="hljs-string">"class"</span>, <span class="hljs-string">"legend"</span>)
    .attr(<span class="hljs-string">"transform"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"translate(0,"</span> + i * <span class="hljs-number">20</span> + <span class="hljs-string">")"</span>; });

legend.append(<span class="hljs-string">"rect"</span>)
    .attr(<span class="hljs-string">"x"</span>, width - <span class="hljs-number">18</span>)
    .attr(<span class="hljs-string">"width"</span>, <span class="hljs-number">18</span>)
    .attr(<span class="hljs-string">"height"</span>, <span class="hljs-number">18</span>)
    .style(<span class="hljs-string">"fill"</span>, color);

legend.append(<span class="hljs-string">"text"</span>)
    .attr(<span class="hljs-string">"x"</span>, width - <span class="hljs-number">24</span>)
    .attr(<span class="hljs-string">"y"</span>, <span class="hljs-number">9</span>)
    .attr(<span class="hljs-string">"dy"</span>, <span class="hljs-string">".35em"</span>)
    .style(<span class="hljs-string">"text-anchor"</span>, <span class="hljs-string">"end"</span>)
    .text(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d; });</code></pre><div id="wallapatta_33" class="section"><div class="content"><p id="wallapatta_34" class="paragraph"><span id="wallapatta_68" class="text">Another problem we solved with Weya is that d3.js draws all the elements that are represented by the data at once. And with Weya we can draw progressively - this is quite useful when you have a lot of data and you don't won't the interface to go unresponsive until everything is drawn. Here's a small example to show the point.</span></p></div></div><pre id="wallapatta_35" class="codeBlock"><code class="coffee">i = <span class="hljs-number">0</span>
data = ...
<span class="hljs-function">
<span class="hljs-title">draw</span> = -&gt;</span>
 <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> i <span class="hljs-keyword">is</span> data.length

 d = data[i]
 Weya container, <span class="hljs-function">-&gt;</span>
  @div <span class="hljs-string">'.user'</span>, <span class="hljs-function">-&gt;</span>
   ...

 i++
 requestAnimationFrame draw

draw()</code></pre><div id="wallapatta_36" class="section"><div class="content"><p id="wallapatta_37" class="paragraph"><span id="wallapatta_69" class="text">The disadvantage of Weya over d3.js is that it doesn't bind data to DOM elements like d3.js does. So you can't use </span><code id="wallapatta_70" class="code"><span id="wallapatta_71" class="text">enter()</span></code><span id="wallapatta_72" class="text">, </span><code id="wallapatta_73" class="code"><span id="wallapatta_74" class="text">exit()</span></code><span id="wallapatta_75" class="text"> and updates when data changes. But most users rarely need these features. We use Weya with our own data bindings with DOM elements (as in the first example with </span><code id="wallapatta_76" class="code"><span id="wallapatta_77" class="text">userElems</span></code><span id="wallapatta_78" class="text">), and we find it simpler than </span><code id="wallapatta_79" class="code"><span id="wallapatta_80" class="text">enter()</span></code><span id="wallapatta_81" class="text"> and </span><code id="wallapatta_82" class="code"><span id="wallapatta_83" class="text">exit()</span></code><span id="wallapatta_84" class="text">.</span></p></div></div></div></div></div>
     </div>
     <div class="wallapatta-sidebar three columns ">
      <div id="wallapatta_3" class="sidenote"><div id="wallapatta_4" class="html"><iframe src="https://ghbtns.com/github-btn.html?user=vpj&amp;repo=weya&amp;type=star&amp;count=true&amp;size=large" frameborder="0" scrolling="0" width="160px" height="30px"></iframe>
</div><div id="wallapatta_5" class="section"><div class="content"><p id="wallapatta_6" class="paragraph"><a id="wallapatta_43" class="link" href="http://jsperf.com/weya-jquery-d3-coffeecup">Performance comparison among d3, coffeecup and weya</a></p></div></div><div id="wallapatta_7" class="section"><div class="content"><p id="wallapatta_8" class="paragraph"><a id="wallapatta_44" class="link" href="http://bl.ocks.org/vpj/9636655">Bar chart example</a></p></div></div></div><div id="wallapatta_18" class="sidenote"><div id="wallapatta_19" class="section"><div class="content"><p id="wallapatta_20" class="paragraph"><a id="wallapatta_58" class="link" href="http://jsperf.com/weya-jquery-d3-coffeecup">Performance comparison among d3, coffeecup and weya</a></p></div></div></div>
     </div>
     <div style="display:none;">
      <div class='wallapatta-code'>Weya.coffee is a lightweight library with no dependencies to generate DOM elements. We developed it to replace &lt;&lt;https://github.com/gradus/coffeecup(Coffeecup)&gt;&gt; as a client side template engine. Because of its simplicity and performance, we are also using Weya to replace DOM manipulation of &lt;&lt;http://d3js.org/(d3.js)&gt;&gt; in data visualizations.

&gt;&gt;&gt;
 &lt;&lt;&lt;
  &lt;iframe src="https://ghbtns.com/github-btn.html?user=vpj&repo=weya&type=star&count=true&size=large" frameborder="0" scrolling="0" width="160px" height="30px"&gt;&lt;/iframe&gt;

 &lt;&lt;http://jsperf.com/weya-jquery-d3-coffeecup(Performance comparison among d3, coffeecup and weya)&gt;&gt;

 &lt;&lt;http://bl.ocks.org/vpj/9636655(Bar chart example)&gt;&gt;

Here's a small example to show the usage.

```coffee
 userElems = []
 Weya container, -&gt;
  @div ".users", -&gt;
   for user, i in users
    userDiv = @div '.user', on: {click: editUser}, -&gt;
     name = @span ".name", user.name
     @span ".phone", user.phone
     if v.image?
      @img src: user.image

    userDiv.userId = i
    userElems.push user: user, name: name

The above code creates a list of users. It binds the data to the dom element ``userDiv.userId = i`` and also keeps track of all the DOM elements in ``userElems``. This is important if you want to manipulate the DOM without reloading the entire user list, for example if a name of a user changes you could change it with ``userElems[changedUserId].name.textContent = changedUserName``.

#Is it a template engine?

 Weya is quite similar to Coffeecup in terms of the syntax. But it's much faster, so it won't fail if you have lots of elements.

 &gt;&gt;&gt;
  &lt;&lt;http://jsperf.com/weya-jquery-d3-coffeecup(Performance comparison among d3, coffeecup and weya)&gt;&gt;


 Also, Weya lets you register event handlers. I feel this is much cleaner than registering events later with CSS selectors, and it's easier to maintain the code since events are register within the DOM creation code.

#Can it replace d3.js?

 We use weya to replace most all the d3.js DOM manipulation.

 Code with Weya is simpler, shorter and nicely intended. Here's the code that draws bar chart in	&lt;&lt;http://bl.ocks.org/vpj/9636655(this example)&gt;&gt;.

 ```coffee
  Weya svg, -&gt;
   for d in data
    @g ".g", transform: "translate(#{x0 d.State},0)", -&gt;
     for age in d.ages
      @rect
       width: x1.rangeBand()
       x: x1 age.name
       y: y age.value
       height: height - y age.value
       fill: color age.name

   for d, i in ageNames.slice().reverse()
    @g ".legend", transform: "translate(0,#{i * 20})", -&gt;
     @rect x: width - 18, width: 18, height: 18, fill: color d
     @text
      x: width - 24, y: 9, dy: ".35em"
      style: {'text-anchor': "end"}, text: d

 Here's the code that does the &lt;&lt;http://bl.ocks.org/mbostock/388705(same with d3.js)&gt;&gt;.

 ```javascript
  var state = svg.selectAll(".state")
      .data(data)
    .enter().append("g")
      .attr("class", "g")
      .attr("transform", function(d) { return "translate(" + x0(d.State) + ",0)"; });

  state.selectAll("rect")
      .data(function(d) { return d.ages; })
    .enter().append("rect")
      .attr("width", x1.rangeBand())
      .attr("x", function(d) { return x1(d.name); })
      .attr("y", function(d) { return y(d.value); })
      .attr("height", function(d) { return height - y(d.value); })
      .style("fill", function(d) { return color(d.name); });

  var legend = svg.selectAll(".legend")
      .data(ageNames.slice().reverse())
    .enter().append("g")
      .attr("class", "legend")
      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  legend.append("rect")
      .attr("x", width - 18)
      .attr("width", 18)
      .attr("height", 18)
      .style("fill", color);

  legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9)
      .attr("dy", ".35em")
      .style("text-anchor", "end")
      .text(function(d) { return d; });


 Another problem we solved with Weya is that d3.js draws all the elements that are represented by the data at once. And with Weya we can draw progressively - this is quite useful when you have a lot of data and you don't won't the interface to go unresponsive until everything is drawn. Here's a small example to show the point.

 ```coffee
  i = 0
  data = ...

  draw = -&gt;
   return if i is data.length

   d = data[i]
   Weya container, -&gt;
    @div '.user', -&gt;
     ...

   i++
   requestAnimationFrame draw

  draw()

 The disadvantage of Weya over d3.js is that it doesn't bind data to DOM elements like d3.js does. So you can't use ``enter()``, ``exit()`` and updates when data changes. But most users rarely need these features. We use Weya with our own data bindings with DOM elements (as in the first example with ``userElems``), and we find it simpler than ``enter()`` and ``exit()``.
</div>
     </div>
    </div>
   </div>
   <div class="wallapatta ">
    <h1 class="title ">
     <a href="libraries.html">
      People who are really serious about software should write their libraries
     </a>
    </h1>
    <h3 class="date ">
     February 19, 2014
    </h3>
    <div class="row ">
     <div class="wallapatta-main nine columns ">
      <div id="wallapatta_10000" class="article"><div id="wallapatta_10001" class="section"><div class="content"><p id="wallapatta_10002" class="paragraph"><span id="wallapatta_10085" class="text">We have been using a lot of tools and libraries in our software, and have replaced a number of them with our code. Libraries makes it easy to get things done, and to ship early. But from my experience, having a third-party library or a tool dominate a core part of your software is not a good idea.</span></p></div></div><div id="wallapatta_10003" class="special"><div id="wallapatta_10004" class="section"><div class="content"><p id="wallapatta_10005" class="paragraph"><span id="wallapatta_10086" class="text">People who are really serious about software should make their own hardware.</span></p></div></div><div id="wallapatta_10006" class="section"><div class="content"><p id="wallapatta_10007" class="paragraph"><strong id="wallapatta_10087" class="bold"><span id="wallapatta_10088" class="text">- Alan Kay</span></strong></p></div></div></div><div id="wallapatta_10008" class="section"><div class="content"><p id="wallapatta_10009" class="paragraph"><span id="wallapatta_10089" class="text">We have moved away from a number of libraries (and frameworks and platforms) over the last couple of years. This may sound like a lot of hate, but it is not so. We still love those libraries and use them on a lot of smaller projects. But when your product grows and you want to mold it the way you want, sometimes libraries stand in your way. Some of the decisions we made could be wrong because we didn't understand the library properly. But we spent a lot of time trying to stick to those libraries before replacing them.</span></p></div></div><div id="wallapatta_10010" class="section"><div class="content"><p id="wallapatta_10011" class="paragraph"><span id="wallapatta_10090" class="text">Writing your code instead of using libraries takes a lot of weight off the product. Most of these libraries are written by really good programmers to be used in a wide range of scenarios, and there is a pretty good chance that you won't need them all. So getting inspiration from them and writing your own stuff will make the software lighter while making things work the way you want. A lot of programmers are likely to write their own code to replace libraries at some point, and that is probably why there are a number of libraries doing almost exact same thing in slightly different ways.</span></p></div></div><div id="wallapatta_10012" class="section"><div class="content"><p id="wallapatta_10013" class="paragraph"><span id="wallapatta_10091" class="text">One of the traps you can fall into when writing our own code is that you might just end up reinventing the wheel. There is a chance that you replace a well written library with a small piece of code initially, but with time end up improving your code to do exactly the same thing the library you threw away did.</span></p></div></div><div id="wallapatta_10014" class="section"><h3 class="heading"><span id="wallapatta_10015" class="block"><span id="wallapatta_10092" class="text">jqPlot</span></span></h3><div class="content"><div id="wallapatta_10019" class="section"><div class="content"><p id="wallapatta_10020" class="paragraph"><span id="wallapatta_10094" class="text">Our first release of </span><a id="wallapatta_10095" class="link" href="http://www.forestpin.com">Forestpin</a><span id="wallapatta_10096" class="text"> used jqPlot for most of our charts. Some not-so-ordinary visualizations were made with </span><a id="wallapatta_10097" class="link" href="http://mbostock.github.io/protovis/">protovis</a><sup id="wallapatta_10098" class="superScript"><span id="wallapatta_10099" class="text">1</span></sup><span id="wallapatta_10100" class="text">. jqPlot helped us quickly develop a product (MVP) to show potential customers, but introduced a lot of constraints. We made some changes to jqPlot to customize some of the charts, but it wasn't enough. The next version of Forestpin used </span><a id="wallapatta_10101" class="link" href="http://d3js.org/">d3.js</a><span id="wallapatta_10102" class="text"> for all the visualizations</span><sup id="wallapatta_10103" class="superScript"><span id="wallapatta_10104" class="text">2</span></sup><span id="wallapatta_10105" class="text">, which gave us more control. We never used jqPlot any project, thereafter.</span></p></div></div></div></div><div id="wallapatta_10026" class="section"><h3 class="heading"><span id="wallapatta_10027" class="block"><span id="wallapatta_10114" class="text">Backbone.js</span></span></h3><div class="content"><div id="wallapatta_10031" class="section"><div class="content"><p id="wallapatta_10032" class="paragraph"><span id="wallapatta_10116" class="text">Backbone was used at </span><a id="wallapatta_10117" class="link" href="http://www.forestpin.com">Forestpin</a><span id="wallapatta_10118" class="text"> as well as at </span><a id="wallapatta_10119" class="link" href="http://www.nearby.lk/">nearby.lk</a><span id="wallapatta_10120" class="text">. What triggered us to code a replacement for Backbone was that it didn't save states in HTML5 history</span><sup id="wallapatta_10121" class="superScript"><span id="wallapatta_10122" class="text">3</span></sup><span id="wallapatta_10123" class="text">. We weren't using most of the features of Backbone too, so the replacement, </span><a id="wallapatta_10124" class="link" href="https://github.com/vpj/sweet">Sweet.js</a><span id="wallapatta_10125" class="text">, was much simpler. We plan on making Sweet.js independent from jQuery and Underscore.js, and also renaming it so that it doesn't get confused with </span><a id="wallapatta_10126" class="link" href="http://sweetjs.org/">Mozilla's Sweet.js</a><span id="wallapatta_10127" class="text">.</span></p></div></div></div></div><div id="wallapatta_10036" class="section"><h3 class="heading"><span id="wallapatta_10037" class="block"><span id="wallapatta_10132" class="text">Database</span></span></h3><div class="content"></div></div><div id="wallapatta_10038" class="section"><div class="content"><p id="wallapatta_10039" class="paragraph"><span id="wallapatta_10133" class="text">Forestpin Enterprise used a custom in-memory data store built ground up at Forestpin from the early days. The data store was a core part of the Forestpin product, and we gained a lot of performance by doing most of the calculations within the database itself.</span></p></div></div><div id="wallapatta_10040" class="section"><h3 class="heading"><span id="wallapatta_10041" class="block"><span id="wallapatta_10134" class="text">jQuery Mobile</span></span></h3><div class="content"><div id="wallapatta_10045" class="section"><div class="content"><p id="wallapatta_10046" class="paragraph"><a id="wallapatta_10136" class="link" href="http://www.nearby.lk/">nearby.lk</a><span id="wallapatta_10137" class="text"> decided to drop jQuery mobile after an year with it. Adopting jQuery mobile was a bad decision. It was very heavy</span><sup id="wallapatta_10138" class="superScript"><span id="wallapatta_10139" class="text">4</span></sup><span id="wallapatta_10140" class="text"> and was not developed to be used for apps like nearby.lk. jQuery mobile is super easy to be implemented for a web site with server generated HTML pages, but ours had a lot of dynamically generated pages and we spent quite sometime getting jQuery mobile to work.</span></p></div></div></div></div><div id="wallapatta_10050" class="section"><h3 class="heading"><span id="wallapatta_10051" class="block"><span id="wallapatta_10144" class="text">Google App Engine</span></span></h3><div class="content"><div id="wallapatta_10055" class="section"><div class="content"><p id="wallapatta_10056" class="paragraph"><a id="wallapatta_10146" class="link" href="http://www.nearby.lk/">nearby.lk</a><span id="wallapatta_10147" class="text"> was hosted on Google App engine for an year and a half and we moved to Amazon</span><sup id="wallapatta_10148" class="superScript"><span id="wallapatta_10149" class="text">5</span></sup><span id="wallapatta_10150" class="text">.</span></p></div></div></div></div><div id="wallapatta_10060" class="section"><h3 class="heading"><span id="wallapatta_10061" class="block"><span id="wallapatta_10155" class="text">d3.js</span></span></h3><div class="content"><div id="wallapatta_10065" class="section"><div class="content"><p id="wallapatta_10066" class="paragraph"><span id="wallapatta_10157" class="text">At Forestpin, we use d3 for all our visualizations and some tables - whenever data is connected to the DOM. We also introduced </span><a id="wallapatta_10158" class="link" href="d3_helpers.html">CoffeeScript helpers</a><span id="wallapatta_10159" class="text"> to simplify D3.js DOM manipulation code.</span></p></div></div><div id="wallapatta_10067" class="section"><div class="content"><p id="wallapatta_10068" class="paragraph"><span id="wallapatta_10160" class="text">We came across some requirements which were hard to tackle with D3.js. One was adding DOM elements progressively. For example, when you are drawing a matrix with a large number of small rectangles. if you draw all if it at once, the user will see nothing for a while and everything will appear at once. But it would have been more user friendly, if elements were added progressively. Then the user will see sets of rectangles appearing in short intervals, as if it was an intended animation. The total time for all rectangles to appear might be slightly longer, but the user will feel otherwise. We couldn't find a neat way to do this with D3.js.</span></p></div></div><div id="wallapatta_10069" class="section"><div class="content"><p id="wallapatta_10070" class="paragraph"><span id="wallapatta_10161" class="text">Another problem was that we couldn't move a particular DOM element across parent elements easily. For instance, if you want to show controls like the action links beneath the focused tweet in the twitter timeline, you should either have hidden action links on each tweet. or redraw action links when the focus changes, or have the action links on a different layer and move it. The first two options are not efficient and the third is tricky. The easiest is to have a DOM element removed and inserted to the focused tweet when the focus changes. This option, although probably not as efficient as the third option, is simpler and faster than the first two</span><sup id="wallapatta_10162" class="superScript"><span id="wallapatta_10163" class="text">6</span></sup><span id="wallapatta_10164" class="text">.</span></p></div></div><div id="wallapatta_10074" class="section"><div class="content"><p id="wallapatta_10075" class="paragraph"><span id="wallapatta_10169" class="text">There were a few similar issues so we thought of going for native Javascript code for DOM manipulation, and wrote a small library with an interface similar to  </span><a id="wallapatta_10170" class="link" href="d3_helpers.html">CoffeeScript helpers for d3.js</a><span id="wallapatta_10171" class="text">. We will continue to use D3.js for scales, csv parsing, etc.</span></p></div></div></div></div><div id="wallapatta_10076" class="section"><h3 class="heading"><span id="wallapatta_10077" class="block"><span id="wallapatta_10172" class="text">jQuery</span></span></h3><div class="content"><div id="wallapatta_10078" class="section"><div class="content"><p id="wallapatta_10079" class="paragraph"><span id="wallapatta_10173" class="text">jQuery is used for selectors, events and Ajax. The dependency on jQuery is becoming less and less. Using pure Javascript is not that complicated and it is much faster</span><sup id="wallapatta_10174" class="superScript"><span id="wallapatta_10175" class="text">7</span></sup><span id="wallapatta_10176" class="text">.</span></p></div></div></div></div><div id="wallapatta_10083" class="section"><div class="content"><p id="wallapatta_10084" class="paragraph"><span id="wallapatta_10178" class="text">Although we've been moving away from a lot of libraries and tools, there is still a number of libraries we use. We use them because they make the development process easier, but only as long as they don't constraint us from building what we want to build.</span></p></div></div></div>
     </div>
     <div class="wallapatta-sidebar three columns ">
      <div id="wallapatta_10016" class="sidenote"><div id="wallapatta_10017" class="section"><div class="content"><p id="wallapatta_10018" class="paragraph"><a id="wallapatta_10093" class="link" href="http://www.jqplot.com/">jqPlot</a></p></div></div></div><div id="wallapatta_10021" class="sidenote"><div id="wallapatta_10022" class="section"><div class="content"><p id="wallapatta_10023" class="paragraph"><sup id="wallapatta_10106" class="superScript"><span id="wallapatta_10107" class="text">1</span></sup><span id="wallapatta_10108" class="text"> Protovis was the predecessor of </span><a id="wallapatta_10109" class="link" href="http://d3js.org/">d3.js</a></p></div></div><div id="wallapatta_10024" class="section"><div class="content"><p id="wallapatta_10025" class="paragraph"><sup id="wallapatta_10110" class="superScript"><span id="wallapatta_10111" class="text">2</span></sup><span id="wallapatta_10112" class="text"> </span><a id="wallapatta_10113" class="link" href="forestpin_2014.html">Forestpin Redesign</a></p></div></div></div><div id="wallapatta_10028" class="sidenote"><div id="wallapatta_10029" class="section"><div class="content"><p id="wallapatta_10030" class="paragraph"><a id="wallapatta_10115" class="link" href="http://backbonejs.org/">Backbone.js</a></p></div></div></div><div id="wallapatta_10033" class="sidenote"><div id="wallapatta_10034" class="section"><div class="content"><p id="wallapatta_10035" class="paragraph"><sup id="wallapatta_10128" class="superScript"><span id="wallapatta_10129" class="text">3</span></sup><span id="wallapatta_10130" class="text"> </span><a id="wallapatta_10131" class="link" href="http://chrisawren.com/posts/Implementing-microstates-in-Backbone-js">Implementing microstates in Backbone.js</a></p></div></div></div><div id="wallapatta_10042" class="sidenote"><div id="wallapatta_10043" class="section"><div class="content"><p id="wallapatta_10044" class="paragraph"><a id="wallapatta_10135" class="link" href="http://jquerymobile.com/">jQuery Mobile</a></p></div></div></div><div id="wallapatta_10047" class="sidenote"><div id="wallapatta_10048" class="section"><div class="content"><p id="wallapatta_10049" class="paragraph"><sup id="wallapatta_10141" class="superScript"><span id="wallapatta_10142" class="text">4</span></sup><span id="wallapatta_10143" class="text"> Newer versions on jQuery Mobile seem to be lighter</span></p></div></div></div><div id="wallapatta_10052" class="sidenote"><div id="wallapatta_10053" class="section"><div class="content"><p id="wallapatta_10054" class="paragraph"><a id="wallapatta_10145" class="link" href="https://developers.google.com/appengine/">Google App Engine]</a></p></div></div></div><div id="wallapatta_10057" class="sidenote"><div id="wallapatta_10058" class="section"><div class="content"><p id="wallapatta_10059" class="paragraph"><sup id="wallapatta_10151" class="superScript"><span id="wallapatta_10152" class="text">5</span></sup><span id="wallapatta_10153" class="text"> </span><a id="wallapatta_10154" class="link" href="app_engine.html">Moving from Google App Engine to Amazon EC2</a></p></div></div></div><div id="wallapatta_10062" class="sidenote"><div id="wallapatta_10063" class="section"><div class="content"><p id="wallapatta_10064" class="paragraph"><a id="wallapatta_10156" class="link" href="http://d3js.org/">d3.js</a></p></div></div></div><div id="wallapatta_10071" class="sidenote"><div id="wallapatta_10072" class="section"><div class="content"><p id="wallapatta_10073" class="paragraph"><sup id="wallapatta_10165" class="superScript"><span id="wallapatta_10166" class="text">6</span></sup><span id="wallapatta_10167" class="text"> </span><a id="wallapatta_10168" class="link" href="http://jsperf.com/moving-children/2">jsPerf</a></p></div></div></div><div id="wallapatta_10080" class="sidenote"><div id="wallapatta_10081" class="section"><div class="content"><p id="wallapatta_10082" class="paragraph"><a id="wallapatta_10177" class="link" href="http://vanilla-js.com/">VanillaJS</a></p></div></div></div>
     </div>
     <div style="display:none;">
      <div class='wallapatta-code'>///People who are really serious about software should at least write their own libraries

We have been using a lot of tools and libraries in our software, and have replaced a number of them with our code. Libraries makes it easy to get things done, and to ship early. But from my experience, having a third-party library or a tool dominate a core part of your software is not a good idea.

+++
 People who are really serious about software should make their own hardware.

 **- Alan Kay**

We have moved away from a number of libraries (and frameworks and platforms) over the last couple of years. This may sound like a lot of hate, but it is not so. We still love those libraries and use them on a lot of smaller projects. But when your product grows and you want to mold it the way you want, sometimes libraries stand in your way. Some of the decisions we made could be wrong because we didn't understand the library properly. But we spent a lot of time trying to stick to those libraries before replacing them.

Writing your code instead of using libraries takes a lot of weight off the product. Most of these libraries are written by really good programmers to be used in a wide range of scenarios, and there is a pretty good chance that you won't need them all. So getting inspiration from them and writing your own stuff will make the software lighter while making things work the way you want. A lot of programmers are likely to write their own code to replace libraries at some point, and that is probably why there are a number of libraries doing almost exact same thing in slightly different ways.

One of the traps you can fall into when writing our own code is that you might just end up reinventing the wheel. There is a chance that you replace a well written library with a small piece of code initially, but with time end up improving your code to do exactly the same thing the library you threw away did.

###jqPlot

 &gt;&gt;&gt;
  &lt;&lt;http://www.jqplot.com/(jqPlot)&gt;&gt;

 Our first release of &lt;&lt;http://www.forestpin.com(Forestpin)&gt;&gt; used jqPlot for most of our charts. Some not-so-ordinary visualizations were made with &lt;&lt;http://mbostock.github.io/protovis/(protovis)&gt;&gt;^^1^^. jqPlot helped us quickly develop a product (MVP) to show potential customers, but introduced a lot of constraints. We made some changes to jqPlot to customize some of the charts, but it wasn't enough. The next version of Forestpin used &lt;&lt;http://d3js.org/(d3.js)&gt;&gt; for all the visualizations^^2^^, which gave us more control. We never used jqPlot any project, thereafter.

 &gt;&gt;&gt;
  ^^1^^ Protovis was the predecessor of &lt;&lt;http://d3js.org/(d3.js)&gt;&gt;

  ^^2^^ &lt;&lt;forestpin_2014.html(Forestpin Redesign)&gt;&gt;

###Backbone.js

 &gt;&gt;&gt;
  &lt;&lt;http://backbonejs.org/(Backbone.js)&gt;&gt;

 Backbone was used at &lt;&lt;http://www.forestpin.com(Forestpin)&gt;&gt; as well as at &lt;&lt;http://www.nearby.lk/(nearby.lk)&gt;&gt;. What triggered us to code a replacement for Backbone was that it didn't save states in HTML5 history^^3^^. We weren't using most of the features of Backbone too, so the replacement, &lt;&lt;https://github.com/vpj/sweet(Sweet.js)&gt;&gt;, was much simpler. We plan on making Sweet.js independent from jQuery and Underscore.js, and also renaming it so that it doesn't get confused with &lt;&lt;http://sweetjs.org/(Mozilla's Sweet.js)&gt;&gt;.

 &gt;&gt;&gt;
  ^^3^^ &lt;&lt;http://chrisawren.com/posts/Implementing-microstates-in-Backbone-js(Implementing microstates in Backbone.js)&gt;&gt;

###Database
Forestpin Enterprise used a custom in-memory data store built ground up at Forestpin from the early days. The data store was a core part of the Forestpin product, and we gained a lot of performance by doing most of the calculations within the database itself.

###jQuery Mobile

 &gt;&gt;&gt;
  &lt;&lt;http://jquerymobile.com/(jQuery Mobile)&gt;&gt;

 &lt;&lt;http://www.nearby.lk/(nearby.lk)&gt;&gt; decided to drop jQuery mobile after an year with it. Adopting jQuery mobile was a bad decision. It was very heavy^^4^^ and was not developed to be used for apps like nearby.lk. jQuery mobile is super easy to be implemented for a web site with server generated HTML pages, but ours had a lot of dynamically generated pages and we spent quite sometime getting jQuery mobile to work.

 &gt;&gt;&gt;
  ^^4^^ Newer versions on jQuery Mobile seem to be lighter

###Google App Engine

 &gt;&gt;&gt;
  &lt;&lt;https://developers.google.com/appengine/(Google App Engine])&gt;&gt;

 &lt;&lt;http://www.nearby.lk/(nearby.lk)&gt;&gt; was hosted on Google App engine for an year and a half and we moved to Amazon^^5^^.

 &gt;&gt;&gt;
  ^^5^^ &lt;&lt;app_engine.html(Moving from Google App Engine to Amazon EC2)&gt;&gt;

###d3.js

 &gt;&gt;&gt;
  &lt;&lt;http://d3js.org/(d3.js)&gt;&gt;

 At Forestpin, we use d3 for all our visualizations and some tables - whenever data is connected to the DOM. We also introduced &lt;&lt;d3_helpers.html(CoffeeScript helpers)&gt;&gt; to simplify D3.js DOM manipulation code.

 We came across some requirements which were hard to tackle with D3.js. One was adding DOM elements progressively. For example, when you are drawing a matrix with a large number of small rectangles. if you draw all if it at once, the user will see nothing for a while and everything will appear at once. But it would have been more user friendly, if elements were added progressively. Then the user will see sets of rectangles appearing in short intervals, as if it was an intended animation. The total time for all rectangles to appear might be slightly longer, but the user will feel otherwise. We couldn't find a neat way to do this with D3.js.

 Another problem was that we couldn't move a particular DOM element across parent elements easily. For instance, if you want to show controls like the action links beneath the focused tweet in the twitter timeline, you should either have hidden action links on each tweet. or redraw action links when the focus changes, or have the action links on a different layer and move it. The first two options are not efficient and the third is tricky. The easiest is to have a DOM element removed and inserted to the focused tweet when the focus changes. This option, although probably not as efficient as the third option, is simpler and faster than the first two^^6^^.

 &gt;&gt;&gt;
  ^^6^^ &lt;&lt;http://jsperf.com/moving-children/2(jsPerf)&gt;&gt;

 There were a few similar issues so we thought of going for native Javascript code for DOM manipulation, and wrote a small library with an interface similar to  &lt;&lt;d3_helpers.html(CoffeeScript helpers for d3.js)&gt;&gt;. We will continue to use D3.js for scales, csv parsing, etc.

###jQuery

 jQuery is used for selectors, events and Ajax. The dependency on jQuery is becoming less and less. Using pure Javascript is not that complicated and it is much faster^^7^^.

 &gt;&gt;&gt;
  &lt;&lt;http://vanilla-js.com/(VanillaJS)&gt;&gt;

Although we've been moving away from a lot of libraries and tools, there is still a number of libraries we use. We use them because they make the development process easier, but only as long as they don't constraint us from building what we want to build.</div>
     </div>
    </div>
   </div>
   <div class="wallapatta ">
    <h1 class="title ">
     <a href="facebook.html">
      We stopped advertising on Facebook
     </a>
    </h1>
    <h3 class="date ">
     December 30, 2013
    </h3>
    <div class="row ">
     <div class="wallapatta-main nine columns ">
      <div id="wallapatta_20000" class="article"><div id="wallapatta_20001" class="section"><h3 class="heading"><span id="wallapatta_20002" class="block"><span id="wallapatta_20042" class="text">Or, How to get Facebook "likes"?</span></span></h3><div class="content"></div></div><div id="wallapatta_20006" class="section"><div class="content"><p id="wallapatta_20007" class="paragraph"><a id="wallapatta_20045" class="link" href="http://www.nearby.lk">nearby.lk</a><span id="wallapatta_20046" class="text"> stopped advertising on Facebook to get Facebook "likes", because we felt that it was a giant fruitless scheme of making Facebook rich. Most of the "likes" on Facebook are useless, they are basically random clicks, which adds no value to anybody, and you need to pay Facebook for that. By the way, this may not be the case with advertising for *Clicks to Website*, *Website Conversions*, etc. - I don't have experience with those.</span></p></div></div><div id="wallapatta_20008" class="section"><div class="content"><p id="wallapatta_20009" class="paragraph"><a id="wallapatta_20047" class="link" href="https://www.facebook.com/www.nearby.lk">We got on Facebook</a><span id="wallapatta_20048" class="text"> when one of our employees created a fan page for the company, which we later made our official page. Facebook advertising was important for us to get awareness and to build reputation - so that our clients know we are popular because a lot of people like us on Facebook.</span></p></div></div><div id="wallapatta_20010" class="section"><div class="content"><p id="wallapatta_20011" class="paragraph"><span id="wallapatta_20049" class="text">It didn't take us long to realize that the first goal is never met because we got almost no traffic to </span><a id="wallapatta_20050" class="link" href="http://www.nearby.lk">nearby.lk</a><span id="wallapatta_20051" class="text"> from Facebook; it was way lower than the number of likes we were getting. What we expected was the other way around - lots people visiting the site and a few "liking" us. </span><strong id="wallapatta_20052" class="bold"><span id="wallapatta_20053" class="text">"Like" never meant like, it meant click.</span></strong><span id="wallapatta_20054" class="text"> People who "liked" probably didn't even know what they clicked, so it didn't do any marketing for us. Also, more "likes" didn't mean that there was a large set of users who would see our updates, since most of these people have liked hundreds of pages.</span></p></div></div><div id="wallapatta_20012" class="section"><div class="content"><p id="wallapatta_20013" class="paragraph"><span id="wallapatta_20055" class="text">Our second goal, building a reputation, a public available figure to show we are popular, was met. And it still works, because most people don't know how Facebook "likes" work. </span><strong id="wallapatta_20056" class="bold"><span id="wallapatta_20057" class="text">They believe we have a lot of likes because we have a great product and people like it. But there's absolutely no dwirelationship between the two.</span></strong></p></div></div><div id="wallapatta_20014" class="section"><div class="content"><p id="wallapatta_20015" class="paragraph"><span id="wallapatta_20058" class="text">State Department has spent $630,000 on Facebook</span><sup id="wallapatta_20059" class="superScript"><span id="wallapatta_20060" class="text">1, 2</span></sup><span id="wallapatta_20061" class="text">.</span></p><div id="wallapatta_20021" class="special"><div id="wallapatta_20022" class="section"><div class="content"><p id="wallapatta_20023" class="paragraph"><span id="wallapatta_20070" class="text">"Many in the bureau criticize the advertising campaigns as ‘buying fans' who may have once clicked on an ad or ‘liked' a photo but have no real interest in the topic and have never engaged further," reads the Inspector General report.</span></p></div></div></div></div></div><div id="wallapatta_20024" class="section"><div class="content"><p id="wallapatta_20025" class="paragraph"><em id="wallapatta_20071" class="italics"><span id="wallapatta_20072" class="text">At least they got their "likes" from homeland.</span></em></p></div></div><div id="wallapatta_20026" class="section"><div class="content"><p id="wallapatta_20027" class="paragraph"><span id="wallapatta_20073" class="text">When we launched a prototype </span><a id="wallapatta_20074" class="link" href="http://www.nearby.in">nearby.in</a><span id="wallapatta_20075" class="text"> with attractions in India, we advertised on Facebook targeting India. With a bit of research while doing that, we realized how most companies in Sri Lanka, which has almost nothing to do with foreign countries, get Facebook likes from countries other than Sri Lanka. They simply advertise targeting other countries, especially developing countries with large populations. And it is cheaper.</span></p></div></div><div id="wallapatta_20031" class="section"><div class="content"><p id="wallapatta_20032" class="paragraph"><span id="wallapatta_20079" class="text">For instance the page </span><a id="wallapatta_20080" class="link" href="https://www.facebook.com/FYI.SriLanka">FYI - Sri Lanka Mobile Directory</a><span id="wallapatta_20081" class="text"> probably, as its name implies, has nothing to do with Turkey.</span></p></div></div><div id="wallapatta_20033" class="image-container"><img class="image" src="http://vpj.github.io/images/posts/fb/city.png" alt="http://vpj.github.io/images/posts/fb/city.png"></div><div id="wallapatta_20034" class="section"><div class="content"><p id="wallapatta_20035" class="paragraph"><span id="wallapatta_20082" class="text">Not all companies are stupid enough to let others see their likes are useless. They spread it among a number of countries, while putting a little extra advertising in homeland, so that the most popular country remains to be homeland. To see how they do it you need to go create an ad yourself.</span></p></div></div><div id="wallapatta_20039" class="image-container"><img class="image" src="http://vpj.github.io/images/posts/fb/ad.png" alt="http://vpj.github.io/images/posts/fb/ad.png"></div><div id="wallapatta_20040" class="section"><div class="content"><p id="wallapatta_20041" class="paragraph"><span id="wallapatta_20084" class="text">So it's all about a race to get more </span><em id="wallapatta_20085" class="italics"><span id="wallapatta_20086" class="text">likes</span></em><span id="wallapatta_20087" class="text">, not creating a product that people </span><em id="wallapatta_20088" class="italics"><span id="wallapatta_20089" class="text">like</span></em><span id="wallapatta_20090" class="text">. And since these are not genuine likes, number of likes in Facebook becomes just a figure of how much money you can waste on Facebook; that is exchanging your money for Facebook "likes" which has no meaning.</span></p></div></div></div>
     </div>
     <div class="wallapatta-sidebar three columns ">
      <div id="wallapatta_20003" class="sidenote"><div id="wallapatta_20004" class="section"><div class="content"><p id="wallapatta_20005" class="paragraph"><strong id="wallapatta_20043" class="bold"><a id="wallapatta_20044" class="link" href="https://news.ycombinator.com/item?id=7036205">Hacker News discussion</a></strong></p></div></div></div><div id="wallapatta_20016" class="sidenote"><div id="wallapatta_20017" class="section"><div class="content"><p id="wallapatta_20018" class="paragraph"><sup id="wallapatta_20062" class="superScript"><span id="wallapatta_20063" class="text">1</span></sup><span id="wallapatta_20064" class="text"> </span><a id="wallapatta_20065" class="link" href="http://thecable.foreignpolicy.com/posts/2013/07/02/omg_state_department_dropped_630000_on_facebook_likes">foreignpolicy.com</a></p></div></div><div id="wallapatta_20019" class="section"><div class="content"><p id="wallapatta_20020" class="paragraph"><sup id="wallapatta_20066" class="superScript"><span id="wallapatta_20067" class="text">2</span></sup><span id="wallapatta_20068" class="text"> </span><a id="wallapatta_20069" class="link" href="http://washingtonexaminer.com/article/2532629">washingtonexaminer.com</a></p></div></div></div><div id="wallapatta_20028" class="sidenote"><div id="wallapatta_20029" class="section"><div class="content"><p id="wallapatta_20030" class="paragraph"><span id="wallapatta_20076" class="text">We didn't work on </span><a id="wallapatta_20077" class="link" href="http://www.nearby.in">nearby.in</a><span id="wallapatta_20078" class="text"> after launch, it still running our old system.</span></p></div></div></div><div id="wallapatta_20036" class="sidenote"><div id="wallapatta_20037" class="section"><div class="content"><p id="wallapatta_20038" class="paragraph"><span id="wallapatta_20083" class="text">I'm not sure how accurate the figures provided by Facebook are, but I'm guessing it should be at least approximately correct.*</span></p></div></div></div>
     </div>
     <div style="display:none;">
      <div class='wallapatta-code'>###Or, How to get Facebook "likes"?

 &gt;&gt;&gt;
  **&lt;&lt;https://news.ycombinator.com/item?id=7036205(Hacker News discussion)&gt;&gt;

&lt;&lt;http://www.nearby.lk(nearby.lk)&gt;&gt; stopped advertising on Facebook to get Facebook "likes", because we felt that it was a giant fruitless scheme of making Facebook rich. Most of the "likes" on Facebook are useless, they are basically random clicks, which adds no value to anybody, and you need to pay Facebook for that. By the way, this may not be the case with advertising for *Clicks to Website*, *Website Conversions*, etc. - I don't have experience with those.

&lt;&lt;https://www.facebook.com/www.nearby.lk(We got on Facebook)&gt;&gt; when one of our employees created a fan page for the company, which we later made our official page. Facebook advertising was important for us to get awareness and to build reputation - so that our clients know we are popular because a lot of people like us on Facebook.

It didn't take us long to realize that the first goal is never met because we got almost no traffic to &lt;&lt;http://www.nearby.lk(nearby.lk&gt;&gt; from Facebook; it was way lower than the number of likes we were getting. What we expected was the other way around - lots people visiting the site and a few "liking" us. **"Like" never meant like, it meant click.** People who "liked" probably didn't even know what they clicked, so it didn't do any marketing for us. Also, more "likes" didn't mean that there was a large set of users who would see our updates, since most of these people have liked hundreds of pages.

Our second goal, building a reputation, a public available figure to show we are popular, was met. And it still works, because most people don't know how Facebook "likes" work. **They believe we have a lot of likes because we have a great product and people like it. But there's absolutely no dwirelationship between the two.**

State Department has spent $630,000 on Facebook^^1, 2^^.

 &gt;&gt;&gt;
  ^^1^^ &lt;&lt;http://thecable.foreignpolicy.com/posts/2013/07/02/omg_state_department_dropped_630000_on_facebook_likes(foreignpolicy.com)&gt;&gt;

  ^^2^^ &lt;&lt;http://washingtonexaminer.com/article/2532629(washingtonexaminer.com)&gt;&gt;

 +++
  "Many in the bureau criticize the advertising campaigns as ‘buying fans' who may have once clicked on an ad or ‘liked' a photo but have no real interest in the topic and have never engaged further," reads the Inspector General report.


--At least they got their "likes" from homeland.

When we launched a prototype &lt;&lt;http://www.nearby.in(nearby.in)&gt;&gt; with attractions in India, we advertised on Facebook targeting India. With a bit of research while doing that, we realized how most companies in Sri Lanka, which has almost nothing to do with foreign countries, get Facebook likes from countries other than Sri Lanka. They simply advertise targeting other countries, especially developing countries with large populations. And it is cheaper.

 &gt;&gt;&gt;
  We didn't work on &lt;&lt;http://www.nearby.in(nearby.in)&gt;&gt; after launch, it still running our old system.

For instance the page &lt;&lt;https://www.facebook.com/FYI.SriLanka(FYI - Sri Lanka Mobile Directory)&gt;&gt; probably, as its name implies, has nothing to do with Turkey.

!http://vpj.github.io/images/posts/fb/city.png

Not all companies are stupid enough to let others see their likes are useless. They spread it among a number of countries, while putting a little extra advertising in homeland, so that the most popular country remains to be homeland. To see how they do it you need to go create an ad yourself.

 &gt;&gt;&gt;
  I'm not sure how accurate the figures provided by Facebook are, but I'm guessing it should be at least approximately correct.*

!http://vpj.github.io/images/posts/fb/ad.png

So it's all about a race to get more --likes--, not creating a product that people --like--. And since these are not genuine likes, number of likes in Facebook becomes just a figure of how much money you can waste on Facebook; that is exchanging your money for Facebook "likes" which has no meaning.
</div>
     </div>
    </div>
   </div>
   <div class="wallapatta ">
    <h1 class="title ">
     <a href="d3_helpers.html">
      Coffeescript helpers for d3.js
     </a>
    </h1>
    <h3 class="date ">
     December 28, 2013
    </h3>
    <div class="row ">
     <div class="wallapatta-main nine columns ">
      <div id="wallapatta_30000" class="article"><div id="wallapatta_30001" class="section"><div class="content"><p id="wallapatta_30002" class="paragraph"><a id="wallapatta_30020" class="link" href="https://github.com/vpj/FP">fp.js</a><span id="wallapatta_30021" class="text"> is a tiny library to help keep </span><a id="wallapatta_30022" class="link" href="http://d3js.org/">d3.js</a><span id="wallapatta_30023" class="text"> dom manipulation code clean.</span></p></div></div><div id="wallapatta_30008" class="section"><div class="content"><p id="wallapatta_30009" class="paragraph"><span id="wallapatta_30031" class="text">I write a lot of d3.js code and most dom manipulation code got complicated and hard to maintain. With fp.js attributes, styles and events can be set easily. But the most important fact is that FP.js lets you maintain indentation in coffescript code that matches the dom structure.</span></p></div></div><pre id="wallapatta_30010" class="codeBlock"><code class="coffeescript">numbers = [<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">23</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">25</span>, <span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">20</span>]
chartHeight = <span class="hljs-number">300</span>

chart = d3.select(<span class="hljs-string">"body"</span>)
 .append(<span class="hljs-string">"svg"</span>)
 .attr(<span class="hljs-string">"width"</span>, <span class="hljs-string">"100%"</span>)
 .attr(<span class="hljs-string">"height"</span>, <span class="hljs-string">"100%"</span>)

bars = chart.selectAll(<span class="hljs-string">"g.bar"</span>).data(numbers).enter()
 .append(<span class="hljs-string">"g"</span>)
 .attr(<span class="hljs-string">"class"</span>, <span class="hljs-string">"bar"</span>)

bars.append(<span class="hljs-string">"rect"</span>)
 .attr(<span class="hljs-string">"y"</span>, <span class="hljs-function"><span class="hljs-params">(d)</span> -&gt;</span> chartHeight - d * <span class="hljs-number">10</span>)
 .attr(<span class="hljs-string">"x"</span>, <span class="hljs-function"><span class="hljs-params">(d, i)</span> -&gt;</span> i * <span class="hljs-number">20</span>)
 .attr(<span class="hljs-string">"width"</span>, <span class="hljs-number">20</span>)
 .attr(<span class="hljs-string">"height"</span>, <span class="hljs-function"><span class="hljs-params">(d)</span> -&gt;</span> d * <span class="hljs-number">10</span>)

bars.append(<span class="hljs-string">"line"</span>)
 .attr(<span class="hljs-string">"class"</span>, <span class="hljs-string">"budget"</span>)
 .attr(<span class="hljs-string">"y1"</span>, <span class="hljs-function"><span class="hljs-params">(d)</span> -&gt;</span> chartHeight - d * <span class="hljs-number">9</span>)
 .attr(<span class="hljs-string">"y2"</span>, <span class="hljs-function"><span class="hljs-params">(d)</span> -&gt;</span> chartHeight - d * <span class="hljs-number">9</span>)
 .attr(<span class="hljs-string">"x1"</span>, <span class="hljs-function"><span class="hljs-params">(d, i)</span> -&gt;</span> i * <span class="hljs-number">20</span>)
 .attr(<span class="hljs-string">"x2"</span>, <span class="hljs-function"><span class="hljs-params">(d, i)</span> -&gt;</span> i * <span class="hljs-number">20</span> + <span class="hljs-number">20</span>)
 .attr(<span class="hljs-string">"stroke"</span>, <span class="hljs-function"><span class="hljs-params">(d)</span> -&gt;</span> <span class="hljs-keyword">if</span> d &lt; <span class="hljs-number">20</span> <span class="hljs-keyword">then</span> <span class="hljs-string">"white"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"#aaa"</span>)</code></pre><div id="wallapatta_30011" class="section"><div class="content"><p id="wallapatta_30012" class="paragraph"><span id="wallapatta_30032" class="text">Above is plain code to draw a simple bar chart with d3.js, and below is the code with FP.js.</span></p></div></div><pre id="wallapatta_30013" class="codeBlock"><code class="coffeescript">numbers = [<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">23</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">25</span>, <span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">20</span>]
chartHeight = <span class="hljs-number">300</span>

FP d3, <span class="hljs-string">'select'</span>, <span class="hljs-string">'body'</span>, <span class="hljs-function">-&gt;</span>
 FP @, <span class="hljs-string">'svg'</span>, width: <span class="hljs-string">"100%"</span>, height: <span class="hljs-string">"100%"</span>, <span class="hljs-function">-&gt;</span>
   FP @, <span class="hljs-string">'selectAll'</span>, <span class="hljs-string">'g.bar'</span>, <span class="hljs-function">-&gt;</span>
    FP @, <span class="hljs-string">'data'</span>, numbers, <span class="hljs-function">-&gt;</span>
     FP @, <span class="hljs-string">'enter'</span>, <span class="hljs-function">-&gt;</span>
      FP @, <span class="hljs-string">'g.bar'</span>, <span class="hljs-function">-&gt;</span>
       FP @, <span class="hljs-string">'rect'</span>,
        y: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> chartHeight - d * <span class="hljs-number">10</span>)
        x: <span class="hljs-function">(<span class="hljs-params">(d, i)</span> -&gt;</span> i * <span class="hljs-number">20</span>)
        width: <span class="hljs-number">20</span>, height: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> d * <span class="hljs-number">10</span>)
       FP @, <span class="hljs-string">'line.budget'</span>,
        y1: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> chartHeight - d * <span class="hljs-number">9</span>)
        y2: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> chartHeight - d * <span class="hljs-number">9</span>)
        x1: <span class="hljs-function">(<span class="hljs-params">(d, i)</span> -&gt;</span> i * <span class="hljs-number">20</span>)
        x2: <span class="hljs-function">(<span class="hljs-params">(d, i)</span> -&gt;</span> i * <span class="hljs-number">20</span> + <span class="hljs-number">20</span>)
        stroke: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> <span class="hljs-keyword">if</span> d &lt; <span class="hljs-number">20</span> <span class="hljs-keyword">then</span> <span class="hljs-string">"white"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"#aaa"</span>)</code></pre><div id="wallapatta_30014" class="section"><div class="content"><p id="wallapatta_30015" class="paragraph"><span id="wallapatta_30033" class="text">I am planning to remove the clutter of </span><code id="wallapatta_30034" class="code"><span id="wallapatta_30035" class="text">FP @</span></code><span id="wallapatta_30036" class="text">, so that it'll look like the following; but for that I will have to either use `with` keyword or create functions for </span><code id="wallapatta_30037" class="code"><span id="wallapatta_30038" class="text">select</span></code><span id="wallapatta_30039" class="text">, </span><code id="wallapatta_30040" class="code"><span id="wallapatta_30041" class="text">rect</span></code><span id="wallapatta_30042" class="text">, </span><code id="wallapatta_30043" class="code"><span id="wallapatta_30044" class="text">line</span></code><span id="wallapatta_30045" class="text">, etc, in a local context similar to </span><a id="wallapatta_30046" class="link" href="https://github.com/mauricemach/coffeekup/blob/master/src/coffeekup.coffee">coffeekup</a><span id="wallapatta_30047" class="text">.</span></p></div></div><pre id="wallapatta_30016" class="codeBlock"><code class="coffeescript">FP d3, <span class="hljs-function">-&gt;</span>
 select <span class="hljs-string">'body'</span>, <span class="hljs-function">-&gt;</span>
  svg width: <span class="hljs-string">"100%"</span>, height: <span class="hljs-string">"100%"</span>, <span class="hljs-function">-&gt;</span>
    selectAll <span class="hljs-string">'g.bar'</span>, <span class="hljs-function">-&gt;</span>
     data numbers, <span class="hljs-function">-&gt;</span>
      enter -&gt;
       g <span class="hljs-string">'.bar'</span>, <span class="hljs-function">-&gt;</span>
        rect
         y: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> chartHeight - d * <span class="hljs-number">10</span>)
         x: <span class="hljs-function">(<span class="hljs-params">(d, i)</span> -&gt;</span> i * <span class="hljs-number">20</span>)
         width: <span class="hljs-number">20</span>, height: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> d * <span class="hljs-number">10</span>)
        line <span class="hljs-string">'.budget'</span>,
         y1: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> chartHeight - d * <span class="hljs-number">9</span>)
         y2: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> chartHeight - d * <span class="hljs-number">9</span>)
         x1: <span class="hljs-function">(<span class="hljs-params">(d, i)</span> -&gt;</span> i * <span class="hljs-number">20</span>)
         x2: <span class="hljs-function">(<span class="hljs-params">(d, i)</span> -&gt;</span> i * <span class="hljs-number">20</span> + <span class="hljs-number">20</span>)
         stroke: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> <span class="hljs-keyword">if</span> d &lt; <span class="hljs-number">20</span> <span class="hljs-keyword">then</span> <span class="hljs-string">"white"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"#aaa"</span>)</code></pre><div id="wallapatta_30017" class="section"><div class="content"><p id="wallapatta_30018" class="paragraph"><span id="wallapatta_30048" class="text">Another option is to use </span><code id="wallapatta_30049" class="code"><span id="wallapatta_30050" class="text">@</span></code><span id="wallapatta_30051" class="text">, which cleaner and not that messy, but code readers might get confused whether </span><code id="wallapatta_30052" class="code"><span id="wallapatta_30053" class="text">@</span></code><span id="wallapatta_30054" class="text"> is referring to the object you are making the call from. Also, using a one letter name such as </span><strong id="wallapatta_30055" class="bold"><span id="wallapatta_30056" class="text">$</span></strong><span id="wallapatta_30057" class="text"> or </span><code id="wallapatta_30058" class="code"><span id="wallapatta_30059" class="text">_</span></code><span id="wallapatta_30060" class="text"> for fp.js will give a similar code - </span><code id="wallapatta_30061" class="code"><span id="wallapatta_30062" class="text">$.rect</span></code><span id="wallapatta_30063" class="text">, </span><code id="wallapatta_30064" class="code"><span id="wallapatta_30065" class="text">$.line</span></code><span id="wallapatta_30066" class="text">, etc.</span></p></div></div><pre id="wallapatta_30019" class="codeBlock"><code class="coffeescript">FP d3, <span class="hljs-function">-&gt;</span>
 @select <span class="hljs-string">'body'</span>, <span class="hljs-function">-&gt;</span>
  @svg width: <span class="hljs-string">"100%"</span>, height: <span class="hljs-string">"100%"</span>, <span class="hljs-function">-&gt;</span>
    @selectAll <span class="hljs-string">'g.bar'</span>, <span class="hljs-function">-&gt;</span>
     @data numbers, <span class="hljs-function">-&gt;</span>
      @enter -&gt;
       @g <span class="hljs-string">'.bar'</span>, <span class="hljs-function">-&gt;</span>
        @rect
         y: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> chartHeight - d * <span class="hljs-number">10</span>)
         x: <span class="hljs-function">(<span class="hljs-params">(d, i)</span> -&gt;</span> i * <span class="hljs-number">20</span>)
         width: <span class="hljs-number">20</span>, height: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> d * <span class="hljs-number">10</span>)
        @line <span class="hljs-string">'.budget'</span>,
         y1: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> chartHeight - d * <span class="hljs-number">9</span>)
         y2: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> chartHeight - d * <span class="hljs-number">9</span>)
         x1: <span class="hljs-function">(<span class="hljs-params">(d, i)</span> -&gt;</span> i * <span class="hljs-number">20</span>)
         x2: <span class="hljs-function">(<span class="hljs-params">(d, i)</span> -&gt;</span> i * <span class="hljs-number">20</span> + <span class="hljs-number">20</span>)
         stroke: <span class="hljs-function">(<span class="hljs-params">(d)</span> -&gt;</span> <span class="hljs-keyword">if</span> d &lt; <span class="hljs-number">20</span> <span class="hljs-keyword">then</span> <span class="hljs-string">"white"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"#aaa"</span>)</code></pre></div>
     </div>
     <div class="wallapatta-sidebar three columns ">
      <div id="wallapatta_30003" class="sidenote"><div id="wallapatta_30004" class="section"><div class="content"><p id="wallapatta_30005" class="paragraph"><strong id="wallapatta_30024" class="bold"><span id="wallapatta_30025" class="text">Update (December 29, 2013)</span></strong></p></div></div><div id="wallapatta_30006" class="section"><div class="content"><p id="wallapatta_30007" class="paragraph"><span id="wallapatta_30026" class="text">Upgraded to support the format at the bottom. Check out </span><a id="wallapatta_30027" class="link" href="http://bl.ocks.org/vpj/8168794">this</a><span id="wallapatta_30028" class="text"> rewrite of the d3.js </span><a id="wallapatta_30029" class="link" href="http://bl.ocks.org/mbostock/3887051">Grouped Bar Chart Example</a><span id="wallapatta_30030" class="text"> using fp.js.</span></p></div></div></div>
     </div>
     <div style="display:none;">
      <div class='wallapatta-code'>///Coffeescript helpers for d3.js

&lt;&lt;https://github.com/vpj/FP(fp.js)&gt;&gt; is a tiny library to help keep &lt;&lt;http://d3js.org/(d3.js)&gt;&gt; dom manipulation code clean.

&gt;&gt;&gt;
 **Update (December 29, 2013)

 Upgraded to support the format at the bottom. Check out &lt;&lt;http://bl.ocks.org/vpj/8168794(this)&gt;&gt; rewrite of the d3.js &lt;&lt;http://bl.ocks.org/mbostock/3887051(Grouped Bar Chart Example)&gt;&gt; using fp.js.

I write a lot of d3.js code and most dom manipulation code got complicated and hard to maintain. With fp.js attributes, styles and events can be set easily. But the most important fact is that FP.js lets you maintain indentation in coffescript code that matches the dom structure.

```coffeescript
 numbers = [5, 3, 23, 6, 7, 0, 1, 25, 11, 19, 20]
 chartHeight = 300

 chart = d3.select("body")
  .append("svg")
  .attr("width", "100%")
  .attr("height", "100%")

 bars = chart.selectAll("g.bar").data(numbers).enter()
  .append("g")
  .attr("class", "bar")

 bars.append("rect")
  .attr("y", (d) -&gt; chartHeight - d * 10)
  .attr("x", (d, i) -&gt; i * 20)
  .attr("width", 20)
  .attr("height", (d) -&gt; d * 10)

 bars.append("line")
  .attr("class", "budget")
  .attr("y1", (d) -&gt; chartHeight - d * 9)
  .attr("y2", (d) -&gt; chartHeight - d * 9)
  .attr("x1", (d, i) -&gt; i * 20)
  .attr("x2", (d, i) -&gt; i * 20 + 20)
  .attr("stroke", (d) -&gt; if d &lt; 20 then "white" else "#aaa")

Above is plain code to draw a simple bar chart with d3.js, and below is the code with FP.js.

```coffeescript
 numbers = [5, 3, 23, 6, 7, 0, 1, 25, 11, 19, 20]
 chartHeight = 300

 FP d3, 'select', 'body', -&gt;
  FP @, 'svg', width: "100%", height: "100%", -&gt;
    FP @, 'selectAll', 'g.bar', -&gt;
     FP @, 'data', numbers, -&gt;
      FP @, 'enter', -&gt;
       FP @, 'g.bar', -&gt;
        FP @, 'rect',
         y: ((d) -&gt; chartHeight - d * 10)
         x: ((d, i) -&gt; i * 20)
         width: 20, height: ((d) -&gt; d * 10)
        FP @, 'line.budget',
         y1: ((d) -&gt; chartHeight - d * 9)
         y2: ((d) -&gt; chartHeight - d * 9)
         x1: ((d, i) -&gt; i * 20)
         x2: ((d, i) -&gt; i * 20 + 20)
         stroke: ((d) -&gt; if d &lt; 20 then "white" else "#aaa")

I am planning to remove the clutter of ``FP @``, so that it'll look like the following; but for that I will have to either use `with` keyword or create functions for ``select``, ``rect``, ``line``, etc, in a local context similar to &lt;&lt;https://github.com/mauricemach/coffeekup/blob/master/src/coffeekup.coffee(coffeekup)&gt;&gt;.

```coffeescript
 FP d3, -&gt;
  select 'body', -&gt;
   svg width: "100%", height: "100%", -&gt;
     selectAll 'g.bar', -&gt;
      data numbers, -&gt;
       enter -&gt;
        g '.bar', -&gt;
         rect
          y: ((d) -&gt; chartHeight - d * 10)
          x: ((d, i) -&gt; i * 20)
          width: 20, height: ((d) -&gt; d * 10)
         line '.budget',
          y1: ((d) -&gt; chartHeight - d * 9)
          y2: ((d) -&gt; chartHeight - d * 9)
          x1: ((d, i) -&gt; i * 20)
          x2: ((d, i) -&gt; i * 20 + 20)
          stroke: ((d) -&gt; if d &lt; 20 then "white" else "#aaa")

Another option is to use ``@``, which cleaner and not that messy, but code readers might get confused whether ``@`` is referring to the object you are making the call from. Also, using a one letter name such as **$** or ``_`` for fp.js will give a similar code - ``$.rect``, ``$.line``, etc.

```coffeescript
 FP d3, -&gt;
  @select 'body', -&gt;
   @svg width: "100%", height: "100%", -&gt;
     @selectAll 'g.bar', -&gt;
      @data numbers, -&gt;
       @enter -&gt;
        @g '.bar', -&gt;
         @rect
          y: ((d) -&gt; chartHeight - d * 10)
          x: ((d, i) -&gt; i * 20)
          width: 20, height: ((d) -&gt; d * 10)
         @line '.budget',
          y1: ((d) -&gt; chartHeight - d * 9)
          y2: ((d) -&gt; chartHeight - d * 9)
          x1: ((d, i) -&gt; i * 20)
          x2: ((d, i) -&gt; i * 20 + 20)
          stroke: ((d) -&gt; if d &lt; 20 then "white" else "#aaa")
</div>
     </div>
    </div>
   </div>
   <div class="wallapatta ">
    <h1 class="title ">
     <a href="underline.html">
      Visualize data tables with variable length underlines
     </a>
    </h1>
    <h3 class="date ">
     December 23, 2013
    </h3>
    <div class="row ">
     <div class="wallapatta-main nine columns ">
      <div id="wallapatta_40000" class="article"><div id="wallapatta_40001" class="section"><div class="content"><p id="wallapatta_40002" class="paragraph"><span id="wallapatta_40037" class="text">Underline doesn't take away space in a table or a list of data and by varying the length of the underline you can help readers scan much faster and get an idea of the data and its distribution without having to read each number.</span></p></div></div><div id="wallapatta_40003" class="section"><h2 class="heading"><span id="wallapatta_40004" class="block"><span id="wallapatta_40038" class="text">List</span></span></h2><div class="content"><div id="wallapatta_40007" class="section"><div class="content"><p id="wallapatta_40008" class="paragraph"><span id="wallapatta_40039" class="text">The simplest and often the best way to show a list of numbesr is to simply list them.</span></p></div></div><div id="wallapatta_40009" class="section"><div class="content"><p id="wallapatta_40010" class="paragraph"><span id="wallapatta_40040" class="text">However, if the reader is to find the largest value she might have to go through each number, especially if all of them have the same number of digits. Sorting by the value will help, but it doesn't work if it's on a table that is sorted by some other figure.</span></p></div></div><div id="wallapatta_40011" class="section"><div class="content"><p id="wallapatta_40012" class="paragraph"><span id="wallapatta_40041" class="text">The line height of the list in the above figure can be reduced but a similar height can be found in most software, including spreadsheets and popular BI.</span></p></div></div></div></div><div id="wallapatta_40013" class="section"><h2 class="heading"><span id="wallapatta_40014" class="block"><span id="wallapatta_40042" class="text">Bars</span></span></h2><div class="content"><div id="wallapatta_40017" class="section"><div class="content"><p id="wallapatta_40018" class="paragraph"><span id="wallapatta_40043" class="text">Adding a bar, like a horizontal bar chart, helps you clearly identify the largest value, as well as get an understanding of the distribution without having to go through the numbers.</span></p></div></div><div id="wallapatta_40019" class="section"><div class="content"><p id="wallapatta_40020" class="paragraph"><span id="wallapatta_40044" class="text">But it's taking up a lot of space - at least another column width or more if you want to make it aesthetically pleasing. Another problem is that it might distract someone trying to read through the numbers; of course, choosing a more subtle color will help in that.</span></p></div></div><div id="wallapatta_40021" class="section"><div class="content"><p id="wallapatta_40022" class="paragraph"><span id="wallapatta_40045" class="text">Displaying text over bars reduces the space, but it makes it lot harder to read the numbers.</span></p></div></div></div></div><div id="wallapatta_40025" class="section"><h2 class="heading"><span id="wallapatta_40026" class="block"><span id="wallapatta_40046" class="text">Underline</span></span></h2><div class="content"><div id="wallapatta_40029" class="section"><div class="content"><p id="wallapatta_40030" class="paragraph"><span id="wallapatta_40047" class="text">Decreasing the height of the bar to a few pixels, or even a single pixel can still give the same effect as bars. Also, you can place them underneath the numbers so that it doesn't take up an extra column.</span></p></div></div><div id="wallapatta_40031" class="section"><div class="content"><p id="wallapatta_40032" class="paragraph"><span id="wallapatta_40048" class="text">Right aligning the bars takes away the cluttered feeling.  Again, choosing a more subtle color and/or reducing the thickness of the lines will help reduce the highlighting effect.</span></p></div></div><div id="wallapatta_40035" class="section"><div class="content"><p id="wallapatta_40036" class="paragraph"><span id="wallapatta_40049" class="text">The scale could be linear or logarithmic. A small axis could be place at the column heading to stop readers from misinterpreting.</span></p></div></div></div></div></div>
     </div>
     <div class="wallapatta-sidebar three columns ">
      <div id="wallapatta_40005" class="sidenote"><div id="wallapatta_40006" class="image-container"><img class="image" src="img/underline/list.png" alt="list" style="max-width: 50%;"></div></div><div id="wallapatta_40015" class="sidenote"><div id="wallapatta_40016" class="image-container"><img class="image" src="img/underline/bars.png" alt="bars" style="max-width: 70%;"></div></div><div id="wallapatta_40023" class="sidenote"><div id="wallapatta_40024" class="image-container"><img class="image" src="img/underline/bars-text.png" alt="bars with text" style="max-width: 60%;"></div></div><div id="wallapatta_40027" class="sidenote"><div id="wallapatta_40028" class="image-container"><img class="image" src="img/underline/underline-left.png" alt="underline left" style="max-width: 50%;"></div></div><div id="wallapatta_40033" class="sidenote"><div id="wallapatta_40034" class="image-container"><img class="image" src="img/underline/underline.png" alt="underline" style="max-width: 50%;"></div></div>
     </div>
     <div style="display:none;">
      <div class='wallapatta-code'>Underline doesn't take away space in a table or a list of data and by varying the length of the underline you can help readers scan much faster and get an idea of the data and its distribution without having to read each number.

##List
 &gt;&gt;&gt;
  !img/underline/list.png(list)(50)

 The simplest and often the best way to show a list of numbesr is to simply list them.

 However, if the reader is to find the largest value she might have to go through each number, especially if all of them have the same number of digits. Sorting by the value will help, but it doesn't work if it's on a table that is sorted by some other figure.

 The line height of the list in the above figure can be reduced but a similar height can be found in most software, including spreadsheets and popular BI.

##Bars
 &gt;&gt;&gt;
  !img/underline/bars.png(bars)(70)

 Adding a bar, like a horizontal bar chart, helps you clearly identify the largest value, as well as get an understanding of the distribution without having to go through the numbers.

 But it's taking up a lot of space - at least another column width or more if you want to make it aesthetically pleasing. Another problem is that it might distract someone trying to read through the numbers; of course, choosing a more subtle color will help in that.

 Displaying text over bars reduces the space, but it makes it lot harder to read the numbers.

 &gt;&gt;&gt;
  !img/underline/bars-text.png(bars with text)(60)

##Underline
 &gt;&gt;&gt;
  !img/underline/underline-left.png(underline left)(50)

 Decreasing the height of the bar to a few pixels, or even a single pixel can still give the same effect as bars. Also, you can place them underneath the numbers so that it doesn't take up an extra column.

 Right aligning the bars takes away the cluttered feeling.  Again, choosing a more subtle color and/or reducing the thickness of the lines will help reduce the highlighting effect.

 &gt;&gt;&gt;
  !img/underline/underline.png(underline)(50)

 The scale could be linear or logarithmic. A small axis could be place at the column heading to stop readers from misinterpreting.

</div>
     </div>
    </div>
   </div>
   <div class="wallapatta ">
    <h1 class="title ">
     <a href="sweetjs.html">
      Another JS Framework
     </a>
    </h1>
    <h3 class="date ">
     December 17, 2013
    </h3>
    <div class="row ">
     <div class="wallapatta-main nine columns ">
      <div id="wallapatta_50000" class="article"><div id="wallapatta_50001" class="section"><div class="content"><p id="wallapatta_50002" class="paragraph"><span id="wallapatta_50021" class="text">I started working on </span><strong id="wallapatta_50022" class="bold"><a id="wallapatta_50023" class="link" href="https://github.com/vpj/sweet">Sweet.js</a></strong><span id="wallapatta_50024" class="text"> about a month ago. It is inspired by </span><a id="wallapatta_50025" class="link" href="http://backbonejs.org/">Backbone.js</a><span id="wallapatta_50026" class="text">. Sweet.js supports HTML5 states, so that you don't have to go through work arounds like </span><a id="wallapatta_50027" class="link" href="https://news.ycombinator.com/item?id=6872330">these</a><span id="wallapatta_50028" class="text">. Sweet.js is not a MVC framework, but it has a views similar to Backbone.js, which supports inheritance without affecting events and initializations of super classes. And it's written in Coffeescript.</span></p></div></div><div id="wallapatta_50006" class="section"><h2 class="heading"><span id="wallapatta_50007" class="block"><span id="wallapatta_50031" class="text">Router</span></span></h2><div class="content"><pre id="wallapatta_50008" class="codeBlock"><code class="coffeescript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Router</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Sweet</span>.<span class="hljs-title">Router</span></span>
 @routes <span class="hljs-comment">#You can add more routes from sub classes</span>
  <span class="hljs-string">''</span>: <span class="hljs-string">'home'</span>
  <span class="hljs-string">'search/:what'</span>: <span class="hljs-string">'results'</span>

 home: <span class="hljs-function">-&gt;</span>
  View.home()

 results: <span class="hljs-function"><span class="hljs-params">(what)</span> -&gt;</span>
  <span class="hljs-built_in">console</span>.log @getState() <span class="hljs-comment">#state</span>
  View.results(what)

router = <span class="hljs-keyword">new</span> Router()
router.start pushState: <span class="hljs-literal">true</span>

<span class="hljs-comment">#Emulate browser back button</span>
router.back()

<span class="hljs-comment">#Whether we can go back without leaving the web app</span>
router.canBack()</code></pre></div></div><div id="wallapatta_50009" class="section"><h2 class="heading"><span id="wallapatta_50010" class="block"><span id="wallapatta_50032" class="text">Views</span></span></h2><div class="content"><div id="wallapatta_50011" class="section"><div class="content"><p id="wallapatta_50012" class="paragraph"><span id="wallapatta_50033" class="text">A generic form class.</span></p></div></div><pre id="wallapatta_50013" class="codeBlock"><code class="coffeescript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Form</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Sweet</span>.<span class="hljs-title">View</span></span>
 @events
  <span class="hljs-string">'click .cancel'</span>: <span class="hljs-string">'cancel'</span>
  <span class="hljs-string">'click .submit'</span>: <span class="hljs-string">'submit'</span>

 @initialize (options) -&gt;
  @model = options.model

cancel: <span class="hljs-function"><span class="hljs-params">(e)</span> -&gt;</span>
 router.back()</code></pre><div id="wallapatta_50014" class="section"><div class="content"><p id="wallapatta_50015" class="paragraph"><span id="wallapatta_50034" class="text">A registration form class.</span></p></div></div><pre id="wallapatta_50016" class="codeBlock"><code class="coffeescript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RegistrationForm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Sweet</span>.<span class="hljs-title">View</span></span>
 <span class="hljs-comment">#Register new events without affecting events registered in Form class</span>
 @events
  <span class="hljs-string">'click .checkUsername'</span>: checkUsername

 <span class="hljs-comment">#Both initialization functions (Form, RegistrationForm) will be called.</span>
 @initialize (options) -&gt;
  @userType = options.userType

 submit: <span class="hljs-function"><span class="hljs-params">(e)</span> -&gt;</span>
  <span class="hljs-comment">#Submit form</span>

 checkUsername: <span class="hljs-function"><span class="hljs-params">(e)</span> -&gt;</span>
  <span class="hljs-comment">#Check availability</span></code></pre></div></div><div id="wallapatta_50017" class="section"><div class="content"><p id="wallapatta_50018" class="paragraph"><span id="wallapatta_50035" class="text">This is a very basic library and it will not suit you if you are looking for a MVC. I'm using this in some of my projects, so I will be maintaining it.</span></p></div></div><div id="wallapatta_50019" class="section"><div class="content"><p id="wallapatta_50020" class="paragraph"><span id="wallapatta_50036" class="text">I'm planning to remove the dependency on jQuery and use vanilla javascript.</span></p></div></div></div>
     </div>
     <div class="wallapatta-sidebar three columns ">
      <div id="wallapatta_50003" class="sidenote"><div id="wallapatta_50004" class="section"><div class="content"><p id="wallapatta_50005" class="paragraph"><strong id="wallapatta_50029" class="bold"><a id="wallapatta_50030" class="link" href="https://news.ycombinator.com/item?id=6920522">Discuss on Hacker News</a></strong></p></div></div></div>
     </div>
     <div style="display:none;">
      <div class='wallapatta-code'>///Another JS Framework
///2013-12-17

I started working on **&lt;&lt;https://github.com/vpj/sweet(Sweet.js)&gt;&gt;** about a month ago. It is inspired by &lt;&lt;http://backbonejs.org/(Backbone.js)&gt;&gt;. Sweet.js supports HTML5 states, so that you don't have to go through work arounds like &lt;&lt;https://news.ycombinator.com/item?id=6872330(these)&gt;&gt;. Sweet.js is not a MVC framework, but it has a views similar to Backbone.js, which supports inheritance without affecting events and initializations of super classes. And it's written in Coffeescript.

&gt;&gt;&gt;
 **&lt;&lt;https://news.ycombinator.com/item?id=6920522(Discuss on Hacker News)&gt;&gt;

## Router

 ```coffeescript
  class Router extends Sweet.Router
   @routes #You can add more routes from sub classes
    '': 'home'
    'search/:what': 'results'

   home: -&gt;
    View.home()

   results: (what) -&gt;
    console.log @getState() #state
    View.results(what)

  router = new Router()
  router.start pushState: true

  #Emulate browser back button
  router.back()

  #Whether we can go back without leaving the web app
  router.canBack()


## Views

 A generic form class.

 ```coffeescript
  class Form extends Sweet.View
   @events
    'click .cancel': 'cancel'
    'click .submit': 'submit'

   @initialize (options) -&gt;
    @model = options.model

  cancel: (e) -&gt;
   router.back()

 A registration form class.

 ```coffeescript
  class RegistrationForm extends Sweet.View
   #Register new events without affecting events registered in Form class
   @events
    'click .checkUsername': checkUsername

   #Both initialization functions (Form, RegistrationForm) will be called.
   @initialize (options) -&gt;
    @userType = options.userType

   submit: (e) -&gt;
    #Submit form

   checkUsername: (e) -&gt;
    #Check availability

This is a very basic library and it will not suit you if you are looking for a MVC. I'm using this in some of my projects, so I will be maintaining it.

I'm planning to remove the dependency on jQuery and use vanilla javascript.</div>
     </div>
    </div>
   </div>
   <div class="paginate ">
    <a class="prev-page button " href="page2.html">
     prev
    </a>
    <a class="next-page button " href="page4.html">
     next
    </a>
   </div>
  </div>
  <script src="lib/highlightjs/highlight.pack.js">
  </script>
  <script src="lib/weya/weya.js">
  </script>
  <script src="lib/weya/base.js">
  </script>
  <script src="lib/mod/mod.js">
  </script>
  <script src="js/static.js?v=9">
  </script>
  <script src="js/parser.js?v=9">
  </script>
  <script src="js/reader.js?v=9">
  </script>
  <script src="js/nodes.js?v=9">
  </script>
  <script src="js/render.js?v=9">
  </script>
 </body>
</html>
